// Code generated by kaitai-struct-compiler from a .ksy source file. DO NOT EDIT.

import (
	"github.com/kaitai-io/kaitai_struct_go_runtime/kaitai"
	"bytes"
)


/**
 * @see <a href="https://learn.microsoft.com/en-us/previous-versions/ms779636(v=vs.85)">Source</a>
 */

type Avi_ChunkType int
const (
	Avi_ChunkType__Idx1 Avi_ChunkType = 829973609
	Avi_ChunkType__Junk Avi_ChunkType = 1263424842
	Avi_ChunkType__Info Avi_ChunkType = 1330007625
	Avi_ChunkType__Isft Avi_ChunkType = 1413894985
	Avi_ChunkType__List Avi_ChunkType = 1414744396
	Avi_ChunkType__Strf Avi_ChunkType = 1718776947
	Avi_ChunkType__Avih Avi_ChunkType = 1751742049
	Avi_ChunkType__Strh Avi_ChunkType = 1752331379
	Avi_ChunkType__Movi Avi_ChunkType = 1769369453
	Avi_ChunkType__Hdrl Avi_ChunkType = 1819436136
	Avi_ChunkType__Strl Avi_ChunkType = 1819440243
)
var values_Avi_ChunkType = map[Avi_ChunkType]struct{}{829973609: {}, 1263424842: {}, 1330007625: {}, 1413894985: {}, 1414744396: {}, 1718776947: {}, 1751742049: {}, 1752331379: {}, 1769369453: {}, 1819436136: {}, 1819440243: {}}
func (v Avi_ChunkType) isDefined() bool {
	_, ok := values_Avi_ChunkType[v]
	return ok
}

type Avi_HandlerType int
const (
	Avi_HandlerType__Mp3 Avi_HandlerType = 85
	Avi_HandlerType__Ac3 Avi_HandlerType = 8192
	Avi_HandlerType__Dts Avi_HandlerType = 8193
	Avi_HandlerType__Cvid Avi_HandlerType = 1684633187
	Avi_HandlerType__Xvid Avi_HandlerType = 1684633208
)
var values_Avi_HandlerType = map[Avi_HandlerType]struct{}{85: {}, 8192: {}, 8193: {}, 1684633187: {}, 1684633208: {}}
func (v Avi_HandlerType) isDefined() bool {
	_, ok := values_Avi_HandlerType[v]
	return ok
}

type Avi_StreamType int
const (
	Avi_StreamType__Mids Avi_StreamType = 1935960429
	Avi_StreamType__Vids Avi_StreamType = 1935960438
	Avi_StreamType__Auds Avi_StreamType = 1935963489
	Avi_StreamType__Txts Avi_StreamType = 1937012852
)
var values_Avi_StreamType = map[Avi_StreamType]struct{}{1935960429: {}, 1935960438: {}, 1935963489: {}, 1937012852: {}}
func (v Avi_StreamType) isDefined() bool {
	_, ok := values_Avi_StreamType[v]
	return ok
}
type Avi struct {
	Magic1 []byte
	FileSize uint32
	Magic2 []byte
	Data *Avi_Blocks
	_io *kaitai.Stream
	_root *Avi
	_parent kaitai.Struct
	_raw_Data []byte
}
func NewAvi() *Avi {
	return &Avi{
	}
}

func (this Avi) IO_() *kaitai.Stream {
	return this._io
}

func (this *Avi) Read(io *kaitai.Stream, parent kaitai.Struct, root *Avi) (err error) {
	this._io = io
	this._parent = parent
	this._root = root

	tmp1, err := this._io.ReadBytes(int(4))
	if err != nil {
		return err
	}
	tmp1 = tmp1
	this.Magic1 = tmp1
	if !(bytes.Equal(this.Magic1, []uint8{82, 73, 70, 70})) {
		return kaitai.NewValidationNotEqualError([]uint8{82, 73, 70, 70}, this.Magic1, this._io, "/seq/0")
	}
	tmp2, err := this._io.ReadU4le()
	if err != nil {
		return err
	}
	this.FileSize = uint32(tmp2)
	tmp3, err := this._io.ReadBytes(int(4))
	if err != nil {
		return err
	}
	tmp3 = tmp3
	this.Magic2 = tmp3
	if !(bytes.Equal(this.Magic2, []uint8{65, 86, 73, 32})) {
		return kaitai.NewValidationNotEqualError([]uint8{65, 86, 73, 32}, this.Magic2, this._io, "/seq/2")
	}
	tmp4, err := this._io.ReadBytes(int(this.FileSize - 4))
	if err != nil {
		return err
	}
	tmp4 = tmp4
	this._raw_Data = tmp4
	_io__raw_Data := kaitai.NewStream(bytes.NewReader(this._raw_Data))
	tmp5 := NewAvi_Blocks()
	err = tmp5.Read(_io__raw_Data, this, this._root)
	if err != nil {
		return err
	}
	this.Data = tmp5
	return err
}

/**
 * Main header of an AVI file, defined as AVIMAINHEADER structure
 * @see <a href="https://learn.microsoft.com/en-us/previous-versions/ms779632(v=vs.85)">Source</a>
 */
type Avi_AvihBody struct {
	MicroSecPerFrame uint32
	MaxBytesPerSec uint32
	PaddingGranularity uint32
	Flags uint32
	TotalFrames uint32
	InitialFrames uint32
	Streams uint32
	SuggestedBufferSize uint32
	Width uint32
	Height uint32
	Reserved []byte
	_io *kaitai.Stream
	_root *Avi
	_parent *Avi_Block
}
func NewAvi_AvihBody() *Avi_AvihBody {
	return &Avi_AvihBody{
	}
}

func (this Avi_AvihBody) IO_() *kaitai.Stream {
	return this._io
}

func (this *Avi_AvihBody) Read(io *kaitai.Stream, parent *Avi_Block, root *Avi) (err error) {
	this._io = io
	this._parent = parent
	this._root = root

	tmp6, err := this._io.ReadU4le()
	if err != nil {
		return err
	}
	this.MicroSecPerFrame = uint32(tmp6)
	tmp7, err := this._io.ReadU4le()
	if err != nil {
		return err
	}
	this.MaxBytesPerSec = uint32(tmp7)
	tmp8, err := this._io.ReadU4le()
	if err != nil {
		return err
	}
	this.PaddingGranularity = uint32(tmp8)
	tmp9, err := this._io.ReadU4le()
	if err != nil {
		return err
	}
	this.Flags = uint32(tmp9)
	tmp10, err := this._io.ReadU4le()
	if err != nil {
		return err
	}
	this.TotalFrames = uint32(tmp10)
	tmp11, err := this._io.ReadU4le()
	if err != nil {
		return err
	}
	this.InitialFrames = uint32(tmp11)
	tmp12, err := this._io.ReadU4le()
	if err != nil {
		return err
	}
	this.Streams = uint32(tmp12)
	tmp13, err := this._io.ReadU4le()
	if err != nil {
		return err
	}
	this.SuggestedBufferSize = uint32(tmp13)
	tmp14, err := this._io.ReadU4le()
	if err != nil {
		return err
	}
	this.Width = uint32(tmp14)
	tmp15, err := this._io.ReadU4le()
	if err != nil {
		return err
	}
	this.Height = uint32(tmp15)
	tmp16, err := this._io.ReadBytes(int(16))
	if err != nil {
		return err
	}
	tmp16 = tmp16
	this.Reserved = tmp16
	return err
}
type Avi_Block struct {
	FourCc Avi_ChunkType
	BlockSize uint32
	Data interface{}
	_io *kaitai.Stream
	_root *Avi
	_parent *Avi_Blocks
	_raw_Data []byte
}
func NewAvi_Block() *Avi_Block {
	return &Avi_Block{
	}
}

func (this Avi_Block) IO_() *kaitai.Stream {
	return this._io
}

func (this *Avi_Block) Read(io *kaitai.Stream, parent *Avi_Blocks, root *Avi) (err error) {
	this._io = io
	this._parent = parent
	this._root = root

	tmp17, err := this._io.ReadU4le()
	if err != nil {
		return err
	}
	this.FourCc = Avi_ChunkType(tmp17)
	tmp18, err := this._io.ReadU4le()
	if err != nil {
		return err
	}
	this.BlockSize = uint32(tmp18)
	switch (this.FourCc) {
	case Avi_ChunkType__Avih:
		tmp19, err := this._io.ReadBytes(int(this.BlockSize))
		if err != nil {
			return err
		}
		tmp19 = tmp19
		this._raw_Data = tmp19
		_io__raw_Data := kaitai.NewStream(bytes.NewReader(this._raw_Data))
		tmp20 := NewAvi_AvihBody()
		err = tmp20.Read(_io__raw_Data, this, this._root)
		if err != nil {
			return err
		}
		this.Data = tmp20
	case Avi_ChunkType__List:
		tmp21, err := this._io.ReadBytes(int(this.BlockSize))
		if err != nil {
			return err
		}
		tmp21 = tmp21
		this._raw_Data = tmp21
		_io__raw_Data := kaitai.NewStream(bytes.NewReader(this._raw_Data))
		tmp22 := NewAvi_ListBody()
		err = tmp22.Read(_io__raw_Data, this, this._root)
		if err != nil {
			return err
		}
		this.Data = tmp22
	case Avi_ChunkType__Strh:
		tmp23, err := this._io.ReadBytes(int(this.BlockSize))
		if err != nil {
			return err
		}
		tmp23 = tmp23
		this._raw_Data = tmp23
		_io__raw_Data := kaitai.NewStream(bytes.NewReader(this._raw_Data))
		tmp24 := NewAvi_StrhBody()
		err = tmp24.Read(_io__raw_Data, this, this._root)
		if err != nil {
			return err
		}
		this.Data = tmp24
	default:
		tmp25, err := this._io.ReadBytes(int(this.BlockSize))
		if err != nil {
			return err
		}
		tmp25 = tmp25
		this._raw_Data = tmp25
	}
	return err
}
type Avi_Blocks struct {
	Entries []*Avi_Block
	_io *kaitai.Stream
	_root *Avi
	_parent kaitai.Struct
}
func NewAvi_Blocks() *Avi_Blocks {
	return &Avi_Blocks{
	}
}

func (this Avi_Blocks) IO_() *kaitai.Stream {
	return this._io
}

func (this *Avi_Blocks) Read(io *kaitai.Stream, parent kaitai.Struct, root *Avi) (err error) {
	this._io = io
	this._parent = parent
	this._root = root

	for i := 0;; i++ {
		tmp26, err := this._io.EOF()
		if err != nil {
			return err
		}
		if tmp26 {
			break
		}
		tmp27 := NewAvi_Block()
		err = tmp27.Read(this._io, this, this._root)
		if err != nil {
			return err
		}
		this.Entries = append(this.Entries, tmp27)
	}
	return err
}
type Avi_ListBody struct {
	ListType Avi_ChunkType
	Data *Avi_Blocks
	_io *kaitai.Stream
	_root *Avi
	_parent *Avi_Block
}
func NewAvi_ListBody() *Avi_ListBody {
	return &Avi_ListBody{
	}
}

func (this Avi_ListBody) IO_() *kaitai.Stream {
	return this._io
}

func (this *Avi_ListBody) Read(io *kaitai.Stream, parent *Avi_Block, root *Avi) (err error) {
	this._io = io
	this._parent = parent
	this._root = root

	tmp28, err := this._io.ReadU4le()
	if err != nil {
		return err
	}
	this.ListType = Avi_ChunkType(tmp28)
	tmp29 := NewAvi_Blocks()
	err = tmp29.Read(this._io, this, this._root)
	if err != nil {
		return err
	}
	this.Data = tmp29
	return err
}
type Avi_Rect struct {
	Left int16
	Top int16
	Right int16
	Bottom int16
	_io *kaitai.Stream
	_root *Avi
	_parent *Avi_StrhBody
}
func NewAvi_Rect() *Avi_Rect {
	return &Avi_Rect{
	}
}

func (this Avi_Rect) IO_() *kaitai.Stream {
	return this._io
}

func (this *Avi_Rect) Read(io *kaitai.Stream, parent *Avi_StrhBody, root *Avi) (err error) {
	this._io = io
	this._parent = parent
	this._root = root

	tmp30, err := this._io.ReadS2le()
	if err != nil {
		return err
	}
	this.Left = int16(tmp30)
	tmp31, err := this._io.ReadS2le()
	if err != nil {
		return err
	}
	this.Top = int16(tmp31)
	tmp32, err := this._io.ReadS2le()
	if err != nil {
		return err
	}
	this.Right = int16(tmp32)
	tmp33, err := this._io.ReadS2le()
	if err != nil {
		return err
	}
	this.Bottom = int16(tmp33)
	return err
}

/**
 * Stream format description
 */
type Avi_StrfBody struct {
	_io *kaitai.Stream
	_root *Avi
	_parent kaitai.Struct
}
func NewAvi_StrfBody() *Avi_StrfBody {
	return &Avi_StrfBody{
	}
}

func (this Avi_StrfBody) IO_() *kaitai.Stream {
	return this._io
}

func (this *Avi_StrfBody) Read(io *kaitai.Stream, parent kaitai.Struct, root *Avi) (err error) {
	this._io = io
	this._parent = parent
	this._root = root

	return err
}

/**
 * Stream header (one header per stream), defined as AVISTREAMHEADER structure
 * @see <a href="https://learn.microsoft.com/en-us/previous-versions/ms779638(v=vs.85)">Source</a>
 */
type Avi_StrhBody struct {
	FccType Avi_StreamType
	FccHandler Avi_HandlerType
	Flags uint32
	Priority uint16
	Language uint16
	InitialFrames uint32
	Scale uint32
	Rate uint32
	Start uint32
	Length uint32
	SuggestedBufferSize uint32
	Quality uint32
	SampleSize uint32
	Frame *Avi_Rect
	_io *kaitai.Stream
	_root *Avi
	_parent *Avi_Block
}
func NewAvi_StrhBody() *Avi_StrhBody {
	return &Avi_StrhBody{
	}
}

func (this Avi_StrhBody) IO_() *kaitai.Stream {
	return this._io
}

func (this *Avi_StrhBody) Read(io *kaitai.Stream, parent *Avi_Block, root *Avi) (err error) {
	this._io = io
	this._parent = parent
	this._root = root

	tmp34, err := this._io.ReadU4le()
	if err != nil {
		return err
	}
	this.FccType = Avi_StreamType(tmp34)
	tmp35, err := this._io.ReadU4le()
	if err != nil {
		return err
	}
	this.FccHandler = Avi_HandlerType(tmp35)
	tmp36, err := this._io.ReadU4le()
	if err != nil {
		return err
	}
	this.Flags = uint32(tmp36)
	tmp37, err := this._io.ReadU2le()
	if err != nil {
		return err
	}
	this.Priority = uint16(tmp37)
	tmp38, err := this._io.ReadU2le()
	if err != nil {
		return err
	}
	this.Language = uint16(tmp38)
	tmp39, err := this._io.ReadU4le()
	if err != nil {
		return err
	}
	this.InitialFrames = uint32(tmp39)
	tmp40, err := this._io.ReadU4le()
	if err != nil {
		return err
	}
	this.Scale = uint32(tmp40)
	tmp41, err := this._io.ReadU4le()
	if err != nil {
		return err
	}
	this.Rate = uint32(tmp41)
	tmp42, err := this._io.ReadU4le()
	if err != nil {
		return err
	}
	this.Start = uint32(tmp42)
	tmp43, err := this._io.ReadU4le()
	if err != nil {
		return err
	}
	this.Length = uint32(tmp43)
	tmp44, err := this._io.ReadU4le()
	if err != nil {
		return err
	}
	this.SuggestedBufferSize = uint32(tmp44)
	tmp45, err := this._io.ReadU4le()
	if err != nil {
		return err
	}
	this.Quality = uint32(tmp45)
	tmp46, err := this._io.ReadU4le()
	if err != nil {
		return err
	}
	this.SampleSize = uint32(tmp46)
	tmp47 := NewAvi_Rect()
	err = tmp47.Read(this._io, this, this._root)
	if err != nil {
		return err
	}
	this.Frame = tmp47
	return err
}

/**
 * Type of the data contained in the stream
 */

/**
 * Type of preferred data handler for the stream (specifies codec for audio / video streams)
 */
