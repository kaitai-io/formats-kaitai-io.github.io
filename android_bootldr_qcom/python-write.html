<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Qualcomm Snapdragon (MSM) bootloader.img format: Python (read-write) parsing library</title>
  <meta name="keywords" content="kaitai,struct,binary,format,parsing,decoding,java,javascript,python,ruby,library,metadata">
  <meta name="description" content="Kaitai Struct is a formal language for binary format specification that can be compiled into parser code">

  <link rel="stylesheet" href="//kaitai.io/styles/bootstrap.min.css">
  <link rel="stylesheet" href="//kaitai.io/styles/bootstrap-theme.min.css">
  <link href='https://fonts.googleapis.com/css?family=Exo:400,700' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Share+Tech+Mono' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  <link rel="stylesheet" href="//kaitai.io/styles/main.css" type="text/css">
  <link rel="stylesheet" href="/pygments-default.css" type="text/css">
  <style>
.diagram-img {
    display: block;
    max-width: 100%;
    height: auto;
    margin: 0 auto;
}

section.format {
    padding: 30px 0;
}

section#format-meta, section#format-index-header {
    background: #e3eef7;
}

section#format-diagram, section#format-index-footer {
    background: #e9f8dd;
}

section#format-ksy, section#format-lang {
    background: #d1eadd;
}

section#format-index .row {
    padding-bottom: 10px;
}

  </style>
</head>
<body data-spy="scroll" data-target="#main-navbar" data-offset="100">

    <nav class="navbar navbar-inverse navbar-fixed-top" id="main-navbar">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-navbar-collapse" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <span class="navbar-brand">Kaitai Struct</span>
            </div>
            <div class="collapse navbar-collapse" id="main-navbar-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="//kaitai.io/#what-is-it">What is it?</a></li>
                    <li><a href="//kaitai.io/#quick-start">Quick Start</a></li>
                    <li><a href="//kaitai.io/#download">Download</a></li>
                    <li><a href="//kaitai.io/news/">News</a></li>
                    <li class="active"><a href="//formats.kaitai.io/">Format Gallery</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="https://ide.kaitai.io/">Try it &mdash; Web IDE</a></li>
                    <li><a href="//doc.kaitai.io/">Documentation</a></li>
                </ul>
            </div>
        </div>
    </nav>
<nav>
    <div class="container">
    <ol class="breadcrumb">
        <li><a href="../">Format Gallery</a></li>
        <li>Archive Files</li>
        <li class="active">Qualcomm Snapdragon (MSM) bootloader.img format</li>
    </ol>
    </div>
</nav>

<section id="format-meta" class="format">
    <div class="container">
        <h1>Qualcomm Snapdragon (MSM) bootloader.img format:
            
            Python (read-write) parsing library
            
        </h1>

        <div class="row">
            <div class="col-md-8">
                <p><p>A bootloader for Android used on various devices powered by Qualcomm
Snapdragon chips:</p>
<p><a href="https://en.wikipedia.org/wiki/Devices_using_Qualcomm_Snapdragon_processors">https://en.wikipedia.org/wiki/Devices_using_Qualcomm_Snapdragon_processors</a></p>
<p>Although not all of the Snapdragon based Android devices use this particular
bootloader format, it is known that devices with the following chips have used
it (example devices are given for each chip):</p>
<ul>
<li>
<p>APQ8064 (<a href="https://en.wikipedia.org/wiki/Devices_using_Qualcomm_Snapdragon_processors#Snapdragon_S4_Pro">devices</a>)</p>
<ul>
<li>Nexus 4 &quot;mako&quot;: <a href="https://androidfilehost.com/?fid=96039337900113996" title="bootloader-mako-makoz30f.img">sample</a> (<a href="https://androidfilehost.com/?w=search&amp;s=bootloader-mako&amp;type=files">other samples</a>),
<a href="https://android.googlesource.com/device/lge/mako/+/33f0114/releasetools.py#98">releasetools.py</a></li>
</ul>
</li>
<li>
<p>MSM8974AA (<a href="https://en.wikipedia.org/wiki/Devices_using_Qualcomm_Snapdragon_processors#Snapdragon_800,_801_and_805_(2013/14)">devices</a>)</p>
<ul>
<li>Nexus 5 &quot;hammerhead&quot;: <a href="https://androidfilehost.com/?fid=385035244224410247" title="bootloader-hammerhead-hhz20h.img">sample</a> (<a href="https://androidfilehost.com/?w=search&amp;s=bootloader-hammerhead&amp;type=files">other samples</a>),
<a href="https://android.googlesource.com/device/lge/hammerhead/+/7618a7d/releasetools.py#116">releasetools.py</a></li>
</ul>
</li>
<li>
<p>MSM8992 (<a href="https://en.wikipedia.org/wiki/Devices_using_Qualcomm_Snapdragon_processors#Snapdragon_808_and_810_(2015)">devices</a>)</p>
<ul>
<li>Nexus 5X &quot;bullhead&quot;: <a href="https://androidfilehost.com/?fid=11410963190603870177" title="bootloader-bullhead-bhz32c.img">sample</a> (<a href="https://androidfilehost.com/?w=search&amp;s=bootloader-bullhead&amp;type=files">other samples</a>),
<a href="https://android.googlesource.com/device/lge/bullhead/+/2994b6b/releasetools.py#126">releasetools.py</a></li>
</ul>
</li>
<li>
<p>APQ8064-1AA (<a href="https://en.wikipedia.org/wiki/Devices_using_Qualcomm_Snapdragon_processors#Snapdragon_600_(2013)">devices</a>)</p>
<ul>
<li>Nexus 7 <span data-escaped-char>[</span>2013] (Mobile) &quot;deb&quot; <!-- raw HTML omitted -->(<span data-escaped-char>*</span>*)<!-- raw HTML omitted -->: <a href="https://androidfilehost.com/?fid=23501681358552487" title="bootloader-deb-flo-04.02.img">sample</a> (<a href="https://androidfilehost.com/?w=search&amp;s=bootloader-deb-flo&amp;type=files">other samples</a>),
<a href="https://android.googlesource.com/device/asus/deb/+/14c1638/releasetools.py#105">releasetools.py</a></li>
<li>Nexus 7 <span data-escaped-char>[</span>2013] (Wi-Fi) &quot;flo&quot; <!-- raw HTML omitted -->(<span data-escaped-char>*</span>*)<!-- raw HTML omitted -->: <a href="https://androidfilehost.com/?fid=23991606952593542" title="bootloader-flo-flo-04.05.img">sample</a> (<a href="https://androidfilehost.com/?w=search&amp;s=bootloader-flo-flo&amp;type=files">other samples</a>),
<a href="https://android.googlesource.com/device/asus/flo/+/9d9fee9/releasetools.py#130">releasetools.py</a></li>
</ul>
</li>
<li>
<p>MSM8996 Pro-AB (<a href="https://en.wikipedia.org/wiki/Devices_using_Qualcomm_Snapdragon_processors#Snapdragon_820_and_821_(2016)">devices</a>)</p>
<ul>
<li>Pixel &quot;sailfish&quot; <!-- raw HTML omitted -->(<span data-escaped-char>*</span>)<!-- raw HTML omitted -->:
<a href="https://androidfilehost.com/?fid=6006931924117907154" title="bootloader-sailfish-8996-012001-1904111134.img">sample</a> (<a href="https://androidfilehost.com/?w=search&amp;s=bootloader-sailfish&amp;type=files">other samples</a>)</li>
<li>Pixel XL &quot;marlin&quot; <!-- raw HTML omitted -->(<span data-escaped-char>*</span>)<!-- raw HTML omitted -->:
<a href="https://androidfilehost.com/?fid=6006931924117907131" title="bootloader-marlin-8996-012001-1904111134.img">sample</a> (<a href="https://androidfilehost.com/?w=search&amp;s=bootloader-marlin&amp;type=files">other samples</a>)</li>
</ul>
</li>
<li>
<p>MSM8998 (<a href="https://en.wikipedia.org/wiki/Devices_using_Qualcomm_Snapdragon_processors#Snapdragon_835_(2017)">devices</a>)</p>
<ul>
<li>Pixel 2 &quot;walleye&quot; <!-- raw HTML omitted -->(<span data-escaped-char>*</span>)<!-- raw HTML omitted -->: <a href="https://androidfilehost.com/?fid=14943124697586348540" title="bootloader-walleye-mw8998-003.0085.00.img">sample</a> (<a href="https://androidfilehost.com/?w=search&amp;s=bootloader-walleye&amp;type=files">other samples</a>)</li>
<li>Pixel 2 XL &quot;taimen&quot;: <a href="https://androidfilehost.com/?fid=14943124697586348536" title="bootloader-taimen-tmz30m.img">sample</a> (<a href="https://androidfilehost.com/?w=search&amp;s=bootloader-taimen&amp;type=files">other samples</a>)</li>
</ul>
</li>
</ul>
<p><!-- raw HTML omitted -->(<span data-escaped-char>*</span>)
<code>bootloader_size</code> is equal to the size of the whole file (not just <code>img_bodies</code> as usual).
<!-- raw HTML omitted --></p>
<p><!-- raw HTML omitted -->(<span data-escaped-char>*</span>*)
There are some data after the end of <code>img_bodies</code>.
<!-- raw HTML omitted --></p>
<hr />
<p>On the other hand, devices with these chips <strong>do not</strong> use this format:</p>
<ul>
<li>
<p><!-- raw HTML omitted -->APQ8084<!-- raw HTML omitted --> (<a href="https://en.wikipedia.org/wiki/Devices_using_Qualcomm_Snapdragon_processors#Snapdragon_800,_801_and_805_(2013/14)">devices</a>)</p>
<ul>
<li>Nexus 6 &quot;shamu&quot;: <a href="https://androidfilehost.com/?fid=745849072291678307" title="bootloader-shamu-moto-apq8084-72.04.img">sample</a> (<a href="https://androidfilehost.com/?w=search&amp;s=bootloader-shamu&amp;type=files">other samples</a>),
<a href="https://android.googlesource.com/device/moto/shamu/+/df9354d/releasetools.py#12">releasetools.py</a> -
uses &quot;Motoboot packed image format&quot; instead</li>
</ul>
</li>
<li>
<p><!-- raw HTML omitted -->MSM8994<!-- raw HTML omitted --> (<a href="https://en.wikipedia.org/wiki/Devices_using_Qualcomm_Snapdragon_processors#Snapdragon_808_and_810_(2015)">devices</a>)</p>
<ul>
<li>Nexus 6P &quot;angler&quot;: <a href="https://androidfilehost.com/?fid=11410963190603870158" title="bootloader-angler-angler-03.84.img">sample</a> (<a href="https://androidfilehost.com/?w=search&amp;s=bootloader-angler&amp;type=files">other samples</a>),
<a href="https://android.googlesource.com/device/huawei/angler/+/cf92cd8/releasetools.py#29">releasetools.py</a> -
uses &quot;Huawei Bootloader packed image format&quot; instead</li>
</ul>
</li>
</ul>
<hr />
<p>The <code>bootloader-*.img</code> samples referenced above originally come from factory
images packed in ZIP archives that can be found on the page <a href="https://developers.google.com/android/images">Factory Images
for Nexus and Pixel Devices</a> on
the Google Developers site. Note that the codenames on that page may be
different than the ones that are written in the list above. That's because the
Google page indicates <strong>ROM codenames</strong> in headings (e.g. &quot;occam&quot; for Nexus 4)
but the above list uses <strong>model codenames</strong> (e.g. &quot;mako&quot; for Nexus 4) because
that is how the original <code>bootloader-*.img</code> files are identified. For most
devices, however, these code names are the same.</p>
</p>
            </div>
            <div class="col-md-4">
                <div class="panel panel-info">
                    
                    
                    <div class="panel-heading">
                        <h3 class="panel-title">File extension</h3>
                    </div>
                    <div class="panel-body">
                        img
                    </div>
                    
                    
                    <div class="panel-heading">
                        <h3 class="panel-title">KS implementation details</h3>
                    </div>
                    
                    <div class="panel-body">
                        License: <a href="https://spdx.org/licenses/CC0-1.0.html">CC0-1.0</a>
                    </div>
                    
                    
                    
                    
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
            <p>
            This page hosts a formal specification of Qualcomm Snapdragon (MSM) bootloader.img format
            using <a href="//kaitai.io">Kaitai Struct</a>. This
            specification can be automatically translated into a
            variety of programming languages to get a parsing library.
            </p>

            <ul class="nav nav-pills">
                
                
                <li>
                
                <a href="index.html" title="Qualcomm Snapdragon (MSM) bootloader.img format parsing Overview library">Overview</a></li>
                
                
                <li>
                
                <a href="cpp_stl_11.html" title="Qualcomm Snapdragon (MSM) bootloader.img format parsing C++11/STL library">C++11/STL</a></li>
                
                
                <li>
                
                <a href="cpp_stl_98.html" title="Qualcomm Snapdragon (MSM) bootloader.img format parsing C++98/STL library">C++98/STL</a></li>
                
                
                <li>
                
                <a href="csharp.html" title="Qualcomm Snapdragon (MSM) bootloader.img format parsing C# library">C#</a></li>
                
                
                <li>
                
                <a href="go.html" title="Qualcomm Snapdragon (MSM) bootloader.img format parsing Go library">Go</a></li>
                
                
                <li>
                
                <a href="graphviz.html" title="Qualcomm Snapdragon (MSM) bootloader.img format parsing GraphViz library">GraphViz</a></li>
                
                
                <li>
                
                <a href="java.html" title="Qualcomm Snapdragon (MSM) bootloader.img format parsing Java library">Java</a></li>
                
                
                <li>
                
                <a href="java-write.html" title="Qualcomm Snapdragon (MSM) bootloader.img format parsing Java (read-write) library">Java (read-write)</a></li>
                
                
                <li>
                
                <a href="javascript.html" title="Qualcomm Snapdragon (MSM) bootloader.img format parsing JavaScript library">JavaScript</a></li>
                
                
                <li>
                
                <a href="lua.html" title="Qualcomm Snapdragon (MSM) bootloader.img format parsing Lua library">Lua</a></li>
                
                
                <li>
                
                <a href="nim.html" title="Qualcomm Snapdragon (MSM) bootloader.img format parsing Nim library">Nim</a></li>
                
                
                <li>
                
                <a href="perl.html" title="Qualcomm Snapdragon (MSM) bootloader.img format parsing Perl library">Perl</a></li>
                
                
                <li>
                
                <a href="php.html" title="Qualcomm Snapdragon (MSM) bootloader.img format parsing PHP library">PHP</a></li>
                
                
                <li>
                
                <a href="python.html" title="Qualcomm Snapdragon (MSM) bootloader.img format parsing Python library">Python</a></li>
                
                
                <li class="active">
                
                <a href="python-write.html" title="Qualcomm Snapdragon (MSM) bootloader.img format parsing Python (read-write) library">Python (read-write)</a></li>
                
                
                <li>
                
                <a href="ruby.html" title="Qualcomm Snapdragon (MSM) bootloader.img format parsing Ruby library">Ruby</a></li>
                
                
                <li>
                
                <a href="rust.html" title="Qualcomm Snapdragon (MSM) bootloader.img format parsing Rust library">Rust</a></li>
                
            </ul>
            </div>
        </div>
    </div>
</section>


<section id="format-lang" class="format">
    <div class="container">
        <h2>
            
            Python (read-write) source code to parse Qualcomm Snapdragon (MSM) bootloader.img format
            
        </h2>

        

        <h3>android_bootldr_qcom.py</h3>

        <div class="row">
            <div class="pull-right">
                <p>
                    <a href="src/python-write/android_bootldr_qcom.py" download="android_bootldr_qcom.py" class="btn btn-success">Download <i class="fa fa-download"></i></a>
                </p>
            </div>
        </div>

        <div class="row">
            <div class="highlight"><pre><span></span><span class="c1"># This is a generated file! Please edit source .ksy file and use kaitai-struct-compiler to rebuild</span>
<span class="c1"># type: ignore</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">kaitaistruct</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">kaitaistruct</span><span class="w"> </span><span class="kn">import</span> <span class="n">ReadWriteKaitaiStruct</span><span class="p">,</span> <span class="n">KaitaiStream</span><span class="p">,</span> <span class="n">BytesIO</span>


<span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">kaitaistruct</span><span class="p">,</span> <span class="s1">&#39;API_VERSION&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span> <span class="o">&lt;</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span>
    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Incompatible Kaitai Struct Python API: 0.11 or later is required, but you have </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">kaitaistruct</span><span class="o">.</span><span class="n">__version__</span><span class="p">))</span>

<span class="k">class</span><span class="w"> </span><span class="nc">AndroidBootldrQcom</span><span class="p">(</span><span class="n">ReadWriteKaitaiStruct</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A bootloader for Android used on various devices powered by Qualcomm</span>
<span class="sd">    Snapdragon chips:</span>
<span class="sd">    </span>
<span class="sd">    &lt;https://en.wikipedia.org/wiki/Devices_using_Qualcomm_Snapdragon_processors&gt;</span>
<span class="sd">    </span>
<span class="sd">    Although not all of the Snapdragon based Android devices use this particular</span>
<span class="sd">    bootloader format, it is known that devices with the following chips have used</span>
<span class="sd">    it (example devices are given for each chip):</span>
<span class="sd">    </span>
<span class="sd">    * APQ8064 ([devices](https://en.wikipedia.org/wiki/Devices_using_Qualcomm_Snapdragon_processors#Snapdragon_S4_Pro))</span>
<span class="sd">      - Nexus 4 &quot;mako&quot;: [sample][sample-mako] ([other samples][others-mako]),</span>
<span class="sd">        [releasetools.py](https://android.googlesource.com/device/lge/mako/+/33f0114/releasetools.py#98)</span>
<span class="sd">    </span>
<span class="sd">    * MSM8974AA ([devices](https://en.wikipedia.org/wiki/Devices_using_Qualcomm_Snapdragon_processors#Snapdragon_800,_801_and_805_(2013/14)))</span>
<span class="sd">      - Nexus 5 &quot;hammerhead&quot;: [sample][sample-hammerhead] ([other samples][others-hammerhead]),</span>
<span class="sd">        [releasetools.py](https://android.googlesource.com/device/lge/hammerhead/+/7618a7d/releasetools.py#116)</span>
<span class="sd">    </span>
<span class="sd">    * MSM8992 ([devices](https://en.wikipedia.org/wiki/Devices_using_Qualcomm_Snapdragon_processors#Snapdragon_808_and_810_(2015)))</span>
<span class="sd">      - Nexus 5X &quot;bullhead&quot;: [sample][sample-bullhead] ([other samples][others-bullhead]),</span>
<span class="sd">        [releasetools.py](https://android.googlesource.com/device/lge/bullhead/+/2994b6b/releasetools.py#126)</span>
<span class="sd">    </span>
<span class="sd">    * APQ8064-1AA ([devices](https://en.wikipedia.org/wiki/Devices_using_Qualcomm_Snapdragon_processors#Snapdragon_600_(2013)))</span>
<span class="sd">      - Nexus 7 \[2013] (Mobile) &quot;deb&quot; &lt;a href=&quot;#doc-note-data-after-img-bodies&quot;&gt;(\**)&lt;/a&gt;: [sample][sample-deb] ([other samples][others-deb]),</span>
<span class="sd">        [releasetools.py](https://android.googlesource.com/device/asus/deb/+/14c1638/releasetools.py#105)</span>
<span class="sd">      - Nexus 7 \[2013] (Wi-Fi) &quot;flo&quot; &lt;a href=&quot;#doc-note-data-after-img-bodies&quot;&gt;(\**)&lt;/a&gt;: [sample][sample-flo] ([other samples][others-flo]),</span>
<span class="sd">        [releasetools.py](https://android.googlesource.com/device/asus/flo/+/9d9fee9/releasetools.py#130)</span>
<span class="sd">    </span>
<span class="sd">    * MSM8996 Pro-AB ([devices](https://en.wikipedia.org/wiki/Devices_using_Qualcomm_Snapdragon_processors#Snapdragon_820_and_821_(2016)))</span>
<span class="sd">      - Pixel &quot;sailfish&quot; &lt;a href=&quot;#doc-note-bootloader-size&quot;&gt;(\*)&lt;/a&gt;:</span>
<span class="sd">        [sample][sample-sailfish] ([other samples][others-sailfish])</span>
<span class="sd">      - Pixel XL &quot;marlin&quot; &lt;a href=&quot;#doc-note-bootloader-size&quot;&gt;(\*)&lt;/a&gt;:</span>
<span class="sd">        [sample][sample-marlin] ([other samples][others-marlin])</span>
<span class="sd">    </span>
<span class="sd">    * MSM8998 ([devices](https://en.wikipedia.org/wiki/Devices_using_Qualcomm_Snapdragon_processors#Snapdragon_835_(2017)))</span>
<span class="sd">      - Pixel 2 &quot;walleye&quot; &lt;a href=&quot;#doc-note-bootloader-size&quot;&gt;(\*)&lt;/a&gt;: [sample][sample-walleye] ([other samples][others-walleye])</span>
<span class="sd">      - Pixel 2 XL &quot;taimen&quot;: [sample][sample-taimen] ([other samples][others-taimen])</span>
<span class="sd">    </span>
<span class="sd">    &lt;small id=&quot;doc-note-bootloader-size&quot;&gt;(\*)</span>
<span class="sd">    `bootloader_size` is equal to the size of the whole file (not just `img_bodies` as usual).</span>
<span class="sd">    &lt;/small&gt;</span>
<span class="sd">    </span>
<span class="sd">    &lt;small id=&quot;doc-note-data-after-img-bodies&quot;&gt;(\**)</span>
<span class="sd">    There are some data after the end of `img_bodies`.</span>
<span class="sd">    &lt;/small&gt;</span>
<span class="sd">    </span>
<span class="sd">    ---</span>
<span class="sd">    </span>
<span class="sd">    On the other hand, devices with these chips **do not** use this format:</span>
<span class="sd">    </span>
<span class="sd">    * &lt;del&gt;APQ8084&lt;/del&gt; ([devices](https://en.wikipedia.org/wiki/Devices_using_Qualcomm_Snapdragon_processors#Snapdragon_800,_801_and_805_(2013/14)))</span>
<span class="sd">      - Nexus 6 &quot;shamu&quot;: [sample][foreign-sample-shamu] ([other samples][foreign-others-shamu]),</span>
<span class="sd">        [releasetools.py](https://android.googlesource.com/device/moto/shamu/+/df9354d/releasetools.py#12) -</span>
<span class="sd">        uses &quot;Motoboot packed image format&quot; instead</span>
<span class="sd">    </span>
<span class="sd">    * &lt;del&gt;MSM8994&lt;/del&gt; ([devices](https://en.wikipedia.org/wiki/Devices_using_Qualcomm_Snapdragon_processors#Snapdragon_808_and_810_(2015)))</span>
<span class="sd">      - Nexus 6P &quot;angler&quot;: [sample][foreign-sample-angler] ([other samples][foreign-others-angler]),</span>
<span class="sd">        [releasetools.py](https://android.googlesource.com/device/huawei/angler/+/cf92cd8/releasetools.py#29) -</span>
<span class="sd">        uses &quot;Huawei Bootloader packed image format&quot; instead</span>
<span class="sd">    </span>
<span class="sd">    [sample-mako]: https://androidfilehost.com/?fid=96039337900113996 &quot;bootloader-mako-makoz30f.img&quot;</span>
<span class="sd">    [others-mako]: https://androidfilehost.com/?w=search&amp;s=bootloader-mako&amp;type=files</span>
<span class="sd">    </span>
<span class="sd">    [sample-hammerhead]: https://androidfilehost.com/?fid=385035244224410247 &quot;bootloader-hammerhead-hhz20h.img&quot;</span>
<span class="sd">    [others-hammerhead]: https://androidfilehost.com/?w=search&amp;s=bootloader-hammerhead&amp;type=files</span>
<span class="sd">    </span>
<span class="sd">    [sample-bullhead]: https://androidfilehost.com/?fid=11410963190603870177 &quot;bootloader-bullhead-bhz32c.img&quot;</span>
<span class="sd">    [others-bullhead]: https://androidfilehost.com/?w=search&amp;s=bootloader-bullhead&amp;type=files</span>
<span class="sd">    </span>
<span class="sd">    [sample-deb]: https://androidfilehost.com/?fid=23501681358552487 &quot;bootloader-deb-flo-04.02.img&quot;</span>
<span class="sd">    [others-deb]: https://androidfilehost.com/?w=search&amp;s=bootloader-deb-flo&amp;type=files</span>
<span class="sd">    </span>
<span class="sd">    [sample-flo]: https://androidfilehost.com/?fid=23991606952593542 &quot;bootloader-flo-flo-04.05.img&quot;</span>
<span class="sd">    [others-flo]: https://androidfilehost.com/?w=search&amp;s=bootloader-flo-flo&amp;type=files</span>
<span class="sd">    </span>
<span class="sd">    [sample-sailfish]: https://androidfilehost.com/?fid=6006931924117907154 &quot;bootloader-sailfish-8996-012001-1904111134.img&quot;</span>
<span class="sd">    [others-sailfish]: https://androidfilehost.com/?w=search&amp;s=bootloader-sailfish&amp;type=files</span>
<span class="sd">    </span>
<span class="sd">    [sample-marlin]: https://androidfilehost.com/?fid=6006931924117907131 &quot;bootloader-marlin-8996-012001-1904111134.img&quot;</span>
<span class="sd">    [others-marlin]: https://androidfilehost.com/?w=search&amp;s=bootloader-marlin&amp;type=files</span>
<span class="sd">    </span>
<span class="sd">    [sample-walleye]: https://androidfilehost.com/?fid=14943124697586348540 &quot;bootloader-walleye-mw8998-003.0085.00.img&quot;</span>
<span class="sd">    [others-walleye]: https://androidfilehost.com/?w=search&amp;s=bootloader-walleye&amp;type=files</span>
<span class="sd">    </span>
<span class="sd">    [sample-taimen]: https://androidfilehost.com/?fid=14943124697586348536 &quot;bootloader-taimen-tmz30m.img&quot;</span>
<span class="sd">    [others-taimen]: https://androidfilehost.com/?w=search&amp;s=bootloader-taimen&amp;type=files</span>
<span class="sd">    </span>
<span class="sd">    [foreign-sample-shamu]: https://androidfilehost.com/?fid=745849072291678307 &quot;bootloader-shamu-moto-apq8084-72.04.img&quot;</span>
<span class="sd">    [foreign-others-shamu]: https://androidfilehost.com/?w=search&amp;s=bootloader-shamu&amp;type=files</span>
<span class="sd">    </span>
<span class="sd">    [foreign-sample-angler]: https://androidfilehost.com/?fid=11410963190603870158 &quot;bootloader-angler-angler-03.84.img&quot;</span>
<span class="sd">    [foreign-others-angler]: https://androidfilehost.com/?w=search&amp;s=bootloader-angler&amp;type=files</span>
<span class="sd">    </span>
<span class="sd">    ---</span>
<span class="sd">    </span>
<span class="sd">    The `bootloader-*.img` samples referenced above originally come from factory</span>
<span class="sd">    images packed in ZIP archives that can be found on the page [Factory Images</span>
<span class="sd">    for Nexus and Pixel Devices](https://developers.google.com/android/images) on</span>
<span class="sd">    the Google Developers site. Note that the codenames on that page may be</span>
<span class="sd">    different than the ones that are written in the list above. That&#39;s because the</span>
<span class="sd">    Google page indicates **ROM codenames** in headings (e.g. &quot;occam&quot; for Nexus 4)</span>
<span class="sd">    but the above list uses **model codenames** (e.g. &quot;mako&quot; for Nexus 4) because</span>
<span class="sd">    that is how the original `bootloader-*.img` files are identified. For most</span>
<span class="sd">    devices, however, these code names are the same.</span>
<span class="sd">    </span>
<span class="sd">    .. seealso::</span>
<span class="sd">       Source - https://android.googlesource.com/device/lge/hammerhead/+/7618a7d/releasetools.py</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_io</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">_parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">_root</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">AndroidBootldrQcom</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">_io</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">_parent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">_root</span> <span class="ow">or</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_should_write_img_bodies</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">img_bodies__enabled</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">magic</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_io</span><span class="o">.</span><span class="n">read_bytes</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">magic</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x42\x4F\x4F\x54\x4C\x44\x52\x21</span><span class="s2">&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">kaitaistruct</span><span class="o">.</span><span class="n">ValidationNotEqualError</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x42\x4F\x4F\x54\x4C\x44\x52\x21</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">magic</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_io</span><span class="p">,</span> <span class="sa">u</span><span class="s2">&quot;/seq/0&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_images</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_io</span><span class="o">.</span><span class="n">read_u4le</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ofs_img_bodies</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_io</span><span class="o">.</span><span class="n">read_u4le</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bootloader_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_io</span><span class="o">.</span><span class="n">read_u4le</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">img_headers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_images</span><span class="p">):</span>
            <span class="n">_t_img_headers</span> <span class="o">=</span> <span class="n">AndroidBootldrQcom</span><span class="o">.</span><span class="n">ImgHeader</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_io</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">_t_img_headers</span><span class="o">.</span><span class="n">_read</span><span class="p">()</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">img_headers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_t_img_headers</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_dirty</span> <span class="o">=</span> <span class="kc">False</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">_fetch_instances</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">img_headers</span><span class="p">)):</span>
            <span class="k">pass</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">img_headers</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">_fetch_instances</span><span class="p">()</span>

        <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img_bodies</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_m_img_bodies&#39;</span><span class="p">):</span>
            <span class="k">pass</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_m_img_bodies</span><span class="p">)):</span>
                <span class="k">pass</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_m_img_bodies</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">_fetch_instances</span><span class="p">()</span>




    <span class="k">def</span><span class="w"> </span><span class="nf">_write__seq</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">io</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">AndroidBootldrQcom</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">_write__seq</span><span class="p">(</span><span class="n">io</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_should_write_img_bodies</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img_bodies__enabled</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_io</span><span class="o">.</span><span class="n">write_bytes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">magic</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_io</span><span class="o">.</span><span class="n">write_u4le</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_images</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_io</span><span class="o">.</span><span class="n">write_u4le</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ofs_img_bodies</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_io</span><span class="o">.</span><span class="n">write_u4le</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bootloader_size</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">img_headers</span><span class="p">)):</span>
            <span class="k">pass</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">img_headers</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">_write__seq</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_io</span><span class="p">)</span>



    <span class="k">def</span><span class="w"> </span><span class="nf">_check</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">magic</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">8</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">kaitaistruct</span><span class="o">.</span><span class="n">ConsistencyError</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;magic&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">magic</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">magic</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x42\x4F\x4F\x54\x4C\x44\x52\x21</span><span class="s2">&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">kaitaistruct</span><span class="o">.</span><span class="n">ValidationNotEqualError</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x42\x4F\x4F\x54\x4C\x44\x52\x21</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">magic</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="sa">u</span><span class="s2">&quot;/seq/0&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">img_headers</span><span class="p">)</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_images</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">kaitaistruct</span><span class="o">.</span><span class="n">ConsistencyError</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;img_headers&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_images</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">img_headers</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">img_headers</span><span class="p">)):</span>
            <span class="k">pass</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">img_headers</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">_root</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">kaitaistruct</span><span class="o">.</span><span class="n">ConsistencyError</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;img_headers&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">img_headers</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">_root</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">img_headers</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">_parent</span> <span class="o">!=</span> <span class="bp">self</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">kaitaistruct</span><span class="o">.</span><span class="n">ConsistencyError</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;img_headers&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">img_headers</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">_parent</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">img_bodies__enabled</span><span class="p">:</span>
            <span class="k">pass</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_m_img_bodies</span><span class="p">)</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_images</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">kaitaistruct</span><span class="o">.</span><span class="n">ConsistencyError</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;img_bodies&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_images</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_m_img_bodies</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_m_img_bodies</span><span class="p">)):</span>
                <span class="k">pass</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_m_img_bodies</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">_root</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">kaitaistruct</span><span class="o">.</span><span class="n">ConsistencyError</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;img_bodies&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_m_img_bodies</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">_root</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_m_img_bodies</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">_parent</span> <span class="o">!=</span> <span class="bp">self</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">kaitaistruct</span><span class="o">.</span><span class="n">ConsistencyError</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;img_bodies&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_m_img_bodies</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">_parent</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_m_img_bodies</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">idx</span> <span class="o">!=</span> <span class="n">i</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">kaitaistruct</span><span class="o">.</span><span class="n">ConsistencyError</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;img_bodies&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_m_img_bodies</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">idx</span><span class="p">)</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">_dirty</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">ImgBody</span><span class="p">(</span><span class="n">ReadWriteKaitaiStruct</span><span class="p">):</span>
        <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">_io</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">_parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">_root</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
            <span class="nb">super</span><span class="p">(</span><span class="n">AndroidBootldrQcom</span><span class="o">.</span><span class="n">ImgBody</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">_io</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">_parent</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">_root</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">idx</span> <span class="o">=</span> <span class="n">idx</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">_read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_io</span><span class="o">.</span><span class="n">read_bytes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">img_header</span><span class="o">.</span><span class="n">len_body</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_dirty</span> <span class="o">=</span> <span class="kc">False</span>


        <span class="k">def</span><span class="w"> </span><span class="nf">_fetch_instances</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">pass</span>


        <span class="k">def</span><span class="w"> </span><span class="nf">_write__seq</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">io</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
            <span class="nb">super</span><span class="p">(</span><span class="n">AndroidBootldrQcom</span><span class="o">.</span><span class="n">ImgBody</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">_write__seq</span><span class="p">(</span><span class="n">io</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_io</span><span class="o">.</span><span class="n">write_bytes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>


        <span class="k">def</span><span class="w"> </span><span class="nf">_check</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="p">)</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">img_header</span><span class="o">.</span><span class="n">len_body</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">kaitaistruct</span><span class="o">.</span><span class="n">ConsistencyError</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;body&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">img_header</span><span class="o">.</span><span class="n">len_body</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_dirty</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="nd">@property</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">img_header</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_m_img_header&#39;</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_m_img_header</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_m_img_header</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">img_headers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">idx</span><span class="p">]</span>
            <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_m_img_header&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">_invalidate_img_header</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_m_img_header</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">ImgHeader</span><span class="p">(</span><span class="n">ReadWriteKaitaiStruct</span><span class="p">):</span>
        <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_io</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">_parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">_root</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
            <span class="nb">super</span><span class="p">(</span><span class="n">AndroidBootldrQcom</span><span class="o">.</span><span class="n">ImgHeader</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">_io</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">_parent</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">_root</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">_read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="p">(</span><span class="n">KaitaiStream</span><span class="o">.</span><span class="n">bytes_terminate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_io</span><span class="o">.</span><span class="n">read_bytes</span><span class="p">(</span><span class="mi">64</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;ASCII&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">len_body</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_io</span><span class="o">.</span><span class="n">read_u4le</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_dirty</span> <span class="o">=</span> <span class="kc">False</span>


        <span class="k">def</span><span class="w"> </span><span class="nf">_fetch_instances</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">pass</span>


        <span class="k">def</span><span class="w"> </span><span class="nf">_write__seq</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">io</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
            <span class="nb">super</span><span class="p">(</span><span class="n">AndroidBootldrQcom</span><span class="o">.</span><span class="n">ImgHeader</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">_write__seq</span><span class="p">(</span><span class="n">io</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_io</span><span class="o">.</span><span class="n">write_bytes_limit</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;ASCII&quot;</span><span class="p">),</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_io</span><span class="o">.</span><span class="n">write_u4le</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">len_body</span><span class="p">)</span>


        <span class="k">def</span><span class="w"> </span><span class="nf">_check</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;ASCII&quot;</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">64</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">kaitaistruct</span><span class="o">.</span><span class="n">ConsistencyError</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="nb">len</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;ASCII&quot;</span><span class="p">)))</span>
            <span class="k">if</span> <span class="n">KaitaiStream</span><span class="o">.</span><span class="n">byte_array_index_of</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;ASCII&quot;</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">kaitaistruct</span><span class="o">.</span><span class="n">ConsistencyError</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">KaitaiStream</span><span class="o">.</span><span class="n">byte_array_index_of</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;ASCII&quot;</span><span class="p">),</span> <span class="mi">0</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_dirty</span> <span class="o">=</span> <span class="kc">False</span>


    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">img_bodies</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_should_write_img_bodies</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write_img_bodies</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_m_img_bodies&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_m_img_bodies</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">img_bodies__enabled</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_io</span><span class="o">.</span><span class="n">pos</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_io</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ofs_img_bodies</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_m_img_bodies</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_images</span><span class="p">):</span>
            <span class="n">_t__m_img_bodies</span> <span class="o">=</span> <span class="n">AndroidBootldrQcom</span><span class="o">.</span><span class="n">ImgBody</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_io</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">_t__m_img_bodies</span><span class="o">.</span><span class="n">_read</span><span class="p">()</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_m_img_bodies</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_t__m_img_bodies</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_io</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">_pos</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_m_img_bodies&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="nd">@img_bodies</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">img_bodies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dirty</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_m_img_bodies</span> <span class="o">=</span> <span class="n">v</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_write_img_bodies</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_should_write_img_bodies</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_io</span><span class="o">.</span><span class="n">pos</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_io</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ofs_img_bodies</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_m_img_bodies</span><span class="p">)):</span>
            <span class="k">pass</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_m_img_bodies</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">_write__seq</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_io</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_io</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">_pos</span><span class="p">)</span>
</pre></div>

        </div>
        
    </div>
</section>

    <footer id="main-footer">
        <div class="container">
            &copy; 2015&ndash;2025 Kaitai Project and <a href="https://github.com/kaitai-io/kaitai_struct_formats/graphs/contributors">format repo contributors</a>

            <h3>Contacts</h3>

            <div class="row">
                <div class="col-sm-4">
                    <i class="fa fa-fw fa-2x fa-github"></i> <a href="https://github.com/kaitai-io/kaitai_struct">GitHub</a>
                </div>
                <div class="col-sm-4">
                    <i class="fa fa-fw fa-2x fa-twitter"></i> <a href="https://twitter.com/kaitai_io">@kaitai_io</a>
                </div>
                <div class="col-sm-4">
                    Gitter: <a href="https://gitter.im/kaitai_struct/Lobby">kaitai_struct</a>
                </div>
            </div>
        </div>
    </footer>

  <script src="//kaitai.io/js/jquery-1.12.3.min.js"></script>
  <script src="//kaitai.io/js/bootstrap.min.js"></script>
</body>
</html>
