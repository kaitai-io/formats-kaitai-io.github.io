<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>DIME (Direct Internet Message Encapsulation) Message: JavaScript parsing library</title>
  <meta name="keywords" content="kaitai,struct,binary,format,parsing,decoding,java,javascript,python,ruby,library,metadata">
  <meta name="description" content="Kaitai Struct is a formal language for binary format specification that can be compiled into parser code">

  <link rel="stylesheet" href="//kaitai.io/styles/bootstrap.min.css">
  <link rel="stylesheet" href="//kaitai.io/styles/bootstrap-theme.min.css">
  <link href='https://fonts.googleapis.com/css?family=Exo:400,700' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Share+Tech+Mono' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  <link rel="stylesheet" href="//kaitai.io/styles/main.css" type="text/css">
  <link rel="stylesheet" href="/pygments-default.css" type="text/css">
  <style>
.diagram-img {
    display: block;
    max-width: 100%;
    height: auto;
    margin: 0 auto;
}

section.format {
    padding: 30px 0;
}

section#format-meta, section#format-index-header {
    background: #e3eef7;
}

section#format-diagram, section#format-index-footer {
    background: #e9f8dd;
}

section#format-ksy, section#format-lang {
    background: #d1eadd;
}

section#format-index .row {
    padding-bottom: 10px;
}

  </style>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-MFSBBRGREL"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-MFSBBRGREL');
  </script>
</head>
<body data-spy="scroll" data-target="#main-navbar" data-offset="100">

    <nav class="navbar navbar-inverse navbar-fixed-top" id="main-navbar">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-navbar-collapse" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <span class="navbar-brand">Kaitai Struct</span>
            </div>
            <div class="collapse navbar-collapse" id="main-navbar-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="//kaitai.io/#what-is-it">What is it?</a></li>
                    <li><a href="//kaitai.io/#quick-start">Quick Start</a></li>
                    <li><a href="//kaitai.io/#download">Download</a></li>
                    <li class="active"><a href="//formats.kaitai.io/">Format Gallery</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="https://ide.kaitai.io/">Try it &mdash; Web IDE</a></li>
                    <li><a href="//doc.kaitai.io/">Documentation</a></li>
                </ul>
            </div>
        </div>
    </nav>
<nav>
    <div class="container">
    <ol class="breadcrumb">
        <li><a href="../">Format Gallery</a></li>
        <li>Networking Protocols</li>
        <li class="active">DIME (Direct Internet Message Encapsulation) Message</li>
    </ol>
    </div>
</nav>

<section id="format-meta" class="format">
    <div class="container">
        <h1>DIME (Direct Internet Message Encapsulation) Message:
            
            JavaScript parsing library
            
        </h1>

        <div class="row">
            <div class="col-md-8">
                <p><p>Direct Internet Message Encapsulation (DIME)
is an old Microsoft specification for sending and receiving
SOAP messages along with additional attachments,
like binary files, XML fragments, and even other
SOAP messages, using standard transport protocols like HTTP.</p>
<p>Sample file: <code>curl -LO https://github.com/kaitai-io/kaitai_struct_formats/files/5894723/scanner_withoptions.dump.gz &amp;&amp; gunzip scanner_withoptions.dump.gz</code></p>
</p>
            </div>
            <div class="col-md-4">
                <div class="panel panel-info">
                    
                    
                    <div class="panel-heading">
                        <h3 class="panel-title">File extension</h3>
                    </div>
                    <div class="panel-body">
                        ["dim", "dime"]
                    </div>
                    
                    
                    <div class="panel-heading">
                        <h3 class="panel-title">KS implementation details</h3>
                    </div>
                    
                    <div class="panel-body">
                        License: <a href="https://spdx.org/licenses/CC0-1.0.html">CC0-1.0</a>
                    </div>
                    
                    
                    
                    
                    
                    <div class="panel-heading">
                        <h3 class="panel-title">References</h3>
                    </div>
                    <div class="panel-body">
                        <ul>
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <li><a href="https://www.wikidata.org/wiki/Q1227457">Wikidata Q1227457</a></li>
                            
                            
                            
                            
                            
                        </ul>
                    </div>
                    
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
            <p>
            This page hosts a formal specification of DIME (Direct Internet Message Encapsulation) Message
            using <a href="//kaitai.io">Kaitai Struct</a>. This
            specification can be automatically translated into a
            variety of programming languages to get a parsing library.
            </p>

            <ul class="nav nav-pills">
                
                
                <li>
                
                <a href="index.html" title="DIME (Direct Internet Message Encapsulation) Message parsing Overview library">Overview</a></li>
                
                
                <li>
                
                <a href="cpp_stl_11.html" title="DIME (Direct Internet Message Encapsulation) Message parsing C++11/STL library">C++11/STL</a></li>
                
                
                <li>
                
                <a href="cpp_stl_98.html" title="DIME (Direct Internet Message Encapsulation) Message parsing C++98/STL library">C++98/STL</a></li>
                
                
                <li>
                
                <a href="csharp.html" title="DIME (Direct Internet Message Encapsulation) Message parsing C# library">C#</a></li>
                
                
                <li>
                
                <a href="go.html" title="DIME (Direct Internet Message Encapsulation) Message parsing Go library">Go</a></li>
                
                
                <li>
                
                <a href="graphviz.html" title="DIME (Direct Internet Message Encapsulation) Message parsing GraphViz library">GraphViz</a></li>
                
                
                <li>
                
                <a href="java.html" title="DIME (Direct Internet Message Encapsulation) Message parsing Java library">Java</a></li>
                
                
                <li class="active">
                
                <a href="javascript.html" title="DIME (Direct Internet Message Encapsulation) Message parsing JavaScript library">JavaScript</a></li>
                
                
                <li>
                
                <a href="lua.html" title="DIME (Direct Internet Message Encapsulation) Message parsing Lua library">Lua</a></li>
                
                
                <li>
                
                <a href="nim.html" title="DIME (Direct Internet Message Encapsulation) Message parsing Nim library">Nim</a></li>
                
                
                <li>
                
                <a href="perl.html" title="DIME (Direct Internet Message Encapsulation) Message parsing Perl library">Perl</a></li>
                
                
                <li>
                
                <a href="php.html" title="DIME (Direct Internet Message Encapsulation) Message parsing PHP library">PHP</a></li>
                
                
                <li>
                
                <a href="python.html" title="DIME (Direct Internet Message Encapsulation) Message parsing Python library">Python</a></li>
                
                
                <li>
                
                <a href="ruby.html" title="DIME (Direct Internet Message Encapsulation) Message parsing Ruby library">Ruby</a></li>
                
            </ul>
            </div>
        </div>
    </div>
</section>

<section id="format-usage" class="format">
    <div class="container">
        <h2>Usage</h2>

        <h3>Runtime library</h3>

        <p>All parsing code for JavaScript generated by Kaitai Struct depends on the
        <a
            href="https://github.com/kaitai-io/kaitai_struct_javascript_runtime/"
            target="_blank" rel="noopener">
        JavaScript runtime library</a>. You have to
        install it before you can parse data.</p>

        <p>The JavaScript runtime library is available
<a href="https://www.npmjs.com/package/kaitai-struct" target="_blank" rel="noopener">at npm</a>:</p>

<pre><code>npm install kaitai-struct</code></pre>

<h3>Code</h3>

<p>See the usage examples in the <a href="//doc.kaitai.io/lang_javascript.html" target="_blank">JavaScript notes</a>.</p>

<p>Parse structure from an ArrayBuffer:</p>



<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">arrayBuffer</span> <span class="o">=</span> <span class="p">...;</span>
<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="ow">new</span> <span class="nx">DimeMessage</span><span class="p">(</span><span class="ow">new</span> <span class="nx">KaitaiStream</span><span class="p">(</span><span class="nx">arrayBuffer</span><span class="p">));</span>
</pre></div>

<p>After that, one can get various attributes from the structure by accessing fields or properties like:</p>


<div class="highlight"><pre><span></span><span class="nx">data</span><span class="p">.</span><span class="nx">records</span> <span class="c1">// =&gt; get records</span>
</pre></div>

    </div>
</section>


<section id="format-lang" class="format">
    <div class="container">
        <h2>
            
            JavaScript source code to parse DIME (Direct Internet Message Encapsulation) Message
            
        </h2>

        

        <h3>DimeMessage.js</h3>

        <div class="row">
            <div class="pull-right">
                <p>
                    <a href="src/javascript/DimeMessage.js" download="DimeMessage.js" class="btn btn-success">Download <i class="fa fa-download"></i></a>
                </p>
            </div>
        </div>

        <div class="row">
            <div class="highlight"><pre><span></span><span class="c1">// This is a generated file! Please edit source .ksy file and use kaitai-struct-compiler to rebuild</span>

<span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="nx">factory</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="ow">typeof</span> <span class="nx">define</span> <span class="o">===</span> <span class="s1">&#39;function&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">define</span><span class="p">.</span><span class="nx">amd</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">define</span><span class="p">([</span><span class="s1">&#39;kaitai-struct/KaitaiStream&#39;</span><span class="p">],</span> <span class="nx">factory</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="ow">typeof</span> <span class="nx">module</span> <span class="o">===</span> <span class="s1">&#39;object&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">factory</span><span class="p">(</span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;kaitai-struct/KaitaiStream&#39;</span><span class="p">));</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">root</span><span class="p">.</span><span class="nx">DimeMessage</span> <span class="o">=</span> <span class="nx">factory</span><span class="p">(</span><span class="nx">root</span><span class="p">.</span><span class="nx">KaitaiStream</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}(</span><span class="ow">typeof</span> <span class="nx">self</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">?</span> <span class="nx">self</span> <span class="o">:</span> <span class="k">this</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">KaitaiStream</span><span class="p">)</span> <span class="p">{</span>
<span class="cm">/**</span>
<span class="cm"> * Direct Internet Message Encapsulation (DIME)</span>
<span class="cm"> * is an old Microsoft specification for sending and receiving</span>
<span class="cm"> * SOAP messages along with additional attachments,</span>
<span class="cm"> * like binary files, XML fragments, and even other</span>
<span class="cm"> * SOAP messages, using standard transport protocols like HTTP.</span>
<span class="cm"> * </span>
<span class="cm"> * Sample file: `curl -LO</span>
<span class="cm"> * https://github.com/kaitai-io/kaitai_struct_formats/files/5894723/scanner_withoptions.dump.gz</span>
<span class="cm"> * &amp;&amp; gunzip scanner_withoptions.dump.gz`</span>
<span class="cm"> * @see {@link https://tools.ietf.org/html/draft-nielsen-dime-02|Source}</span>
<span class="cm"> * @see {@link https://docs.microsoft.com/en-us/archive/msdn-magazine/2002/december/sending-files-attachments-and-soap-messages-via-dime|Source}</span>
<span class="cm"> * @see {@link http://imrannazar.com/Parsing-the-DIME-Message-Format|Source}</span>
<span class="cm"> */</span>

<span class="kd">var</span> <span class="nx">DimeMessage</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">DimeMessage</span><span class="p">.</span><span class="nx">TypeFormats</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">freeze</span><span class="p">({</span>
    <span class="nx">UNCHANGED</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span>
    <span class="nx">MEDIA_TYPE</span><span class="o">:</span> <span class="mf">1</span><span class="p">,</span>
    <span class="nx">ABSOLUTE_URI</span><span class="o">:</span> <span class="mf">2</span><span class="p">,</span>
    <span class="nx">UNKNOWN</span><span class="o">:</span> <span class="mf">3</span><span class="p">,</span>
    <span class="nx">NONE</span><span class="o">:</span> <span class="mf">4</span><span class="p">,</span>

    <span class="mf">0</span><span class="o">:</span> <span class="s2">&quot;UNCHANGED&quot;</span><span class="p">,</span>
    <span class="mf">1</span><span class="o">:</span> <span class="s2">&quot;MEDIA_TYPE&quot;</span><span class="p">,</span>
    <span class="mf">2</span><span class="o">:</span> <span class="s2">&quot;ABSOLUTE_URI&quot;</span><span class="p">,</span>
    <span class="mf">3</span><span class="o">:</span> <span class="s2">&quot;UNKNOWN&quot;</span><span class="p">,</span>
    <span class="mf">4</span><span class="o">:</span> <span class="s2">&quot;NONE&quot;</span><span class="p">,</span>
  <span class="p">});</span>

  <span class="kd">function</span> <span class="nx">DimeMessage</span><span class="p">(</span><span class="nx">_io</span><span class="p">,</span> <span class="nx">_parent</span><span class="p">,</span> <span class="nx">_root</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_io</span> <span class="o">=</span> <span class="nx">_io</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_parent</span> <span class="o">=</span> <span class="nx">_parent</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_root</span> <span class="o">=</span> <span class="nx">_root</span> <span class="o">||</span> <span class="k">this</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">_read</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="nx">DimeMessage</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_read</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">records</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_io</span><span class="p">.</span><span class="nx">isEof</span><span class="p">())</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">records</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="ow">new</span> <span class="nx">Record</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_io</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_root</span><span class="p">));</span>
      <span class="nx">i</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="cm">/**</span>
<span class="cm">   * padding to the next 4-byte boundary</span>
<span class="cm">   */</span>

  <span class="kd">var</span> <span class="nx">Padding</span> <span class="o">=</span> <span class="nx">DimeMessage</span><span class="p">.</span><span class="nx">Padding</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">Padding</span><span class="p">(</span><span class="nx">_io</span><span class="p">,</span> <span class="nx">_parent</span><span class="p">,</span> <span class="nx">_root</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_io</span> <span class="o">=</span> <span class="nx">_io</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_parent</span> <span class="o">=</span> <span class="nx">_parent</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_root</span> <span class="o">=</span> <span class="nx">_root</span> <span class="o">||</span> <span class="k">this</span><span class="p">;</span>

      <span class="k">this</span><span class="p">.</span><span class="nx">_read</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="nx">Padding</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_read</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">boundaryPadding</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_io</span><span class="p">.</span><span class="nx">readBytes</span><span class="p">(</span><span class="nx">KaitaiStream</span><span class="p">.</span><span class="nx">mod</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_io</span><span class="p">.</span><span class="nx">pos</span><span class="p">),</span> <span class="mf">4</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">Padding</span><span class="p">;</span>
  <span class="p">})();</span>

  <span class="cm">/**</span>
<span class="cm">   * the option field of the record</span>
<span class="cm">   */</span>

  <span class="kd">var</span> <span class="nx">OptionField</span> <span class="o">=</span> <span class="nx">DimeMessage</span><span class="p">.</span><span class="nx">OptionField</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">OptionField</span><span class="p">(</span><span class="nx">_io</span><span class="p">,</span> <span class="nx">_parent</span><span class="p">,</span> <span class="nx">_root</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_io</span> <span class="o">=</span> <span class="nx">_io</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_parent</span> <span class="o">=</span> <span class="nx">_parent</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_root</span> <span class="o">=</span> <span class="nx">_root</span> <span class="o">||</span> <span class="k">this</span><span class="p">;</span>

      <span class="k">this</span><span class="p">.</span><span class="nx">_read</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="nx">OptionField</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_read</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">optionElements</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_io</span><span class="p">.</span><span class="nx">isEof</span><span class="p">())</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">optionElements</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="ow">new</span> <span class="nx">OptionElement</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_io</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_root</span><span class="p">));</span>
        <span class="nx">i</span><span class="o">++</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">OptionField</span><span class="p">;</span>
  <span class="p">})();</span>

  <span class="cm">/**</span>
<span class="cm">   * one element of the option field</span>
<span class="cm">   */</span>

  <span class="kd">var</span> <span class="nx">OptionElement</span> <span class="o">=</span> <span class="nx">DimeMessage</span><span class="p">.</span><span class="nx">OptionElement</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">OptionElement</span><span class="p">(</span><span class="nx">_io</span><span class="p">,</span> <span class="nx">_parent</span><span class="p">,</span> <span class="nx">_root</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_io</span> <span class="o">=</span> <span class="nx">_io</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_parent</span> <span class="o">=</span> <span class="nx">_parent</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_root</span> <span class="o">=</span> <span class="nx">_root</span> <span class="o">||</span> <span class="k">this</span><span class="p">;</span>

      <span class="k">this</span><span class="p">.</span><span class="nx">_read</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="nx">OptionElement</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_read</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">elementFormat</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_io</span><span class="p">.</span><span class="nx">readU2be</span><span class="p">();</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">lenElement</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_io</span><span class="p">.</span><span class="nx">readU2be</span><span class="p">();</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">elementData</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_io</span><span class="p">.</span><span class="nx">readBytes</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">lenElement</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">OptionElement</span><span class="p">;</span>
  <span class="p">})();</span>

  <span class="cm">/**</span>
<span class="cm">   * each individual fragment of the message</span>
<span class="cm">   */</span>

  <span class="kd">var</span> <span class="nx">Record</span> <span class="o">=</span> <span class="nx">DimeMessage</span><span class="p">.</span><span class="nx">Record</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">Record</span><span class="p">(</span><span class="nx">_io</span><span class="p">,</span> <span class="nx">_parent</span><span class="p">,</span> <span class="nx">_root</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_io</span> <span class="o">=</span> <span class="nx">_io</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_parent</span> <span class="o">=</span> <span class="nx">_parent</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_root</span> <span class="o">=</span> <span class="nx">_root</span> <span class="o">||</span> <span class="k">this</span><span class="p">;</span>

      <span class="k">this</span><span class="p">.</span><span class="nx">_read</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="nx">Record</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_read</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">version</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_io</span><span class="p">.</span><span class="nx">readBitsIntBe</span><span class="p">(</span><span class="mf">5</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">isFirstRecord</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_io</span><span class="p">.</span><span class="nx">readBitsIntBe</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span> <span class="o">!=</span> <span class="mf">0</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">isLastRecord</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_io</span><span class="p">.</span><span class="nx">readBitsIntBe</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span> <span class="o">!=</span> <span class="mf">0</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">isChunkRecord</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_io</span><span class="p">.</span><span class="nx">readBitsIntBe</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span> <span class="o">!=</span> <span class="mf">0</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">typeFormat</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_io</span><span class="p">.</span><span class="nx">readBitsIntBe</span><span class="p">(</span><span class="mf">4</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">reserved</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_io</span><span class="p">.</span><span class="nx">readBitsIntBe</span><span class="p">(</span><span class="mf">4</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_io</span><span class="p">.</span><span class="nx">alignToByte</span><span class="p">();</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">lenOptions</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_io</span><span class="p">.</span><span class="nx">readU2be</span><span class="p">();</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">lenId</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_io</span><span class="p">.</span><span class="nx">readU2be</span><span class="p">();</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">lenType</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_io</span><span class="p">.</span><span class="nx">readU2be</span><span class="p">();</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">lenData</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_io</span><span class="p">.</span><span class="nx">readU4be</span><span class="p">();</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_raw_options</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_io</span><span class="p">.</span><span class="nx">readBytes</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">lenOptions</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">_io__raw_options</span> <span class="o">=</span> <span class="ow">new</span> <span class="nx">KaitaiStream</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_raw_options</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="ow">new</span> <span class="nx">OptionField</span><span class="p">(</span><span class="nx">_io__raw_options</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_root</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">optionsPadding</span> <span class="o">=</span> <span class="ow">new</span> <span class="nx">Padding</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_io</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_root</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">KaitaiStream</span><span class="p">.</span><span class="nx">bytesToStr</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_io</span><span class="p">.</span><span class="nx">readBytes</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">lenId</span><span class="p">),</span> <span class="s2">&quot;ASCII&quot;</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">idPadding</span> <span class="o">=</span> <span class="ow">new</span> <span class="nx">Padding</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_io</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_root</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">KaitaiStream</span><span class="p">.</span><span class="nx">bytesToStr</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_io</span><span class="p">.</span><span class="nx">readBytes</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">lenType</span><span class="p">),</span> <span class="s2">&quot;ASCII&quot;</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">typePadding</span> <span class="o">=</span> <span class="ow">new</span> <span class="nx">Padding</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_io</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_root</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_io</span><span class="p">.</span><span class="nx">readBytes</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">lenData</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">dataPadding</span> <span class="o">=</span> <span class="ow">new</span> <span class="nx">Padding</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_io</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_root</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * DIME format version (always 1)</span>
<span class="cm">     */</span>

    <span class="cm">/**</span>
<span class="cm">     * Set if this is the first record in the message</span>
<span class="cm">     */</span>

    <span class="cm">/**</span>
<span class="cm">     * Set if this is the last record in the message</span>
<span class="cm">     */</span>

    <span class="cm">/**</span>
<span class="cm">     * Set if the file contained in this record is chunked into multiple records</span>
<span class="cm">     */</span>

    <span class="cm">/**</span>
<span class="cm">     * Indicates the structure and format of the value of the TYPE field</span>
<span class="cm">     */</span>

    <span class="cm">/**</span>
<span class="cm">     * Reserved for future use</span>
<span class="cm">     */</span>

    <span class="cm">/**</span>
<span class="cm">     * Length of the Options field</span>
<span class="cm">     */</span>

    <span class="cm">/**</span>
<span class="cm">     * Length of the ID field</span>
<span class="cm">     */</span>

    <span class="cm">/**</span>
<span class="cm">     * Length of the Type field</span>
<span class="cm">     */</span>

    <span class="cm">/**</span>
<span class="cm">     * Length of the Data field</span>
<span class="cm">     */</span>

    <span class="cm">/**</span>
<span class="cm">     * Unique identifier of the file (set in the first record of file)</span>
<span class="cm">     */</span>

    <span class="cm">/**</span>
<span class="cm">     * Specified type in the format set with type_format</span>
<span class="cm">     */</span>

    <span class="cm">/**</span>
<span class="cm">     * The file data</span>
<span class="cm">     */</span>

    <span class="k">return</span> <span class="nx">Record</span><span class="p">;</span>
  <span class="p">})();</span>

  <span class="k">return</span> <span class="nx">DimeMessage</span><span class="p">;</span>
<span class="p">})();</span>
<span class="k">return</span> <span class="nx">DimeMessage</span><span class="p">;</span>
<span class="p">}));</span>
</pre></div>

        </div>
        
    </div>
</section>

    <footer id="main-footer">
        <div class="container">
            &copy; 2015&ndash;2023 Kaitai Project and <a href="https://github.com/kaitai-io/kaitai_struct_formats/graphs/contributors">format repo contributors</a>

            <h3>Contacts</h3>

            <div class="row">
                <div class="col-sm-4">
                    <i class="fa fa-fw fa-2x fa-github"></i> <a href="https://github.com/kaitai-io/kaitai_struct">GitHub</a>
                </div>
                <div class="col-sm-4">
                    <i class="fa fa-fw fa-2x fa-twitter"></i> <a href="https://twitter.com/kaitai_io">@kaitai_io</a>
                </div>
                <div class="col-sm-4">
                    Gitter: <a href="https://gitter.im/kaitai_struct/Lobby">kaitai_struct</a>
                </div>
            </div>
        </div>
    </footer>

  <script src="//kaitai.io/js/jquery-1.12.3.min.js"></script>
  <script src="//kaitai.io/js/bootstrap.min.js"></script>

  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-76299550-1', 'auto');
      ga('send', 'pageview');
  </script>
</body>
</html>
