<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>TrueType Font File: Lua parsing library</title>
  <meta name="keywords" content="kaitai,struct,binary,format,parsing,decoding,java,javascript,python,ruby,library,metadata">
  <meta name="description" content="Kaitai Struct is a formal language for binary format specification that can be compiled into parser code">

  <link rel="stylesheet" href="//kaitai.io/styles/bootstrap.min.css">
  <link rel="stylesheet" href="//kaitai.io/styles/bootstrap-theme.min.css">
  <link href='https://fonts.googleapis.com/css?family=Exo:400,700' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Share+Tech+Mono' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  <link rel="stylesheet" href="//kaitai.io/styles/main.css" type="text/css">
  <link rel="stylesheet" href="/pygments-default.css" type="text/css">
  <style>
.diagram-img {
    display: block;
    max-width: 100%;
    height: auto;
    margin: 0 auto;
}

section.format {
    padding: 30px 0;
}

section#format-meta, section#format-index-header {
    background: #e3eef7;
}

section#format-diagram, section#format-index-footer {
    background: #e9f8dd;
}

section#format-ksy, section#format-lang {
    background: #d1eadd;
}

section#format-index .row {
    padding-bottom: 10px;
}

  </style>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-MFSBBRGREL"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-MFSBBRGREL');
  </script>
</head>
<body data-spy="scroll" data-target="#main-navbar" data-offset="100">

    <nav class="navbar navbar-inverse navbar-fixed-top" id="main-navbar">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-navbar-collapse" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <span class="navbar-brand">Kaitai Struct</span>
            </div>
            <div class="collapse navbar-collapse" id="main-navbar-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="//kaitai.io/#what-is-it">What is it?</a></li>
                    <li><a href="//kaitai.io/#quick-start">Quick Start</a></li>
                    <li><a href="//kaitai.io/#download">Download</a></li>
                    <li><a href="//kaitai.io/news/">News</a></li>
                    <li class="active"><a href="//formats.kaitai.io/">Format Gallery</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="https://ide.kaitai.io/">Try it &mdash; Web IDE</a></li>
                    <li><a href="//doc.kaitai.io/">Documentation</a></li>
                </ul>
            </div>
        </div>
    </nav>
<nav>
    <div class="container">
    <ol class="breadcrumb">
        <li><a href="../">Format Gallery</a></li>
        <li>Fonts</li>
        <li class="active">TrueType Font File</li>
    </ol>
    </div>
</nav>

<section id="format-meta" class="format">
    <div class="container">
        <h1>TrueType Font File:
            
            Lua parsing library
            
        </h1>

        <div class="row">
            <div class="col-md-8">
                <p><p>A TrueType font file contains data, in table format, that comprises
an outline font.</p>
</p>
            </div>
            <div class="col-md-4">
                <div class="panel panel-info">
                    
                    
                    <div class="panel-heading">
                        <h3 class="panel-title">File extension</h3>
                    </div>
                    <div class="panel-body">
                        ttf
                    </div>
                    
                    
                    <div class="panel-heading">
                        <h3 class="panel-title">KS implementation details</h3>
                    </div>
                    
                    <div class="panel-body">
                        License: <a href="https://spdx.org/licenses/MIT.html">MIT</a>
                    </div>
                    
                    
                    
                    
                    
                    <div class="panel-heading">
                        <h3 class="panel-title">References</h3>
                    </div>
                    <div class="panel-body">
                        <ul>
                            
                            
                            
                            
                            
                            
                            
                            <li><a href="https://www.nationalarchives.gov.uk/pronom/x-fmt/453">PRONOM x-fmt/453</a></li>
                            
                            <li><a href="https://www.wikidata.org/wiki/Q751800">Wikidata Q751800</a></li>
                            
                            
                            
                            <li><a href="http://fileformats.archiveteam.org/wiki/TrueType">TrueType in Just Solve the File Format Problem</a></li>
                            
                        </ul>
                    </div>
                    
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
            <p>
            This page hosts a formal specification of TrueType Font File
            using <a href="//kaitai.io">Kaitai Struct</a>. This
            specification can be automatically translated into a
            variety of programming languages to get a parsing library.
            </p>

            <ul class="nav nav-pills">
                
                
                <li>
                
                <a href="index.html" title="TrueType Font File parsing Overview library">Overview</a></li>
                
                
                <li>
                
                <a href="cpp_stl_11.html" title="TrueType Font File parsing C++11/STL library">C++11/STL</a></li>
                
                
                <li>
                
                <a href="cpp_stl_98.html" title="TrueType Font File parsing C++98/STL library">C++98/STL</a></li>
                
                
                <li>
                
                <a href="csharp.html" title="TrueType Font File parsing C# library">C#</a></li>
                
                
                <li>
                
                <a href="go.html" title="TrueType Font File parsing Go library">Go</a></li>
                
                
                <li>
                
                <a href="graphviz.html" title="TrueType Font File parsing GraphViz library">GraphViz</a></li>
                
                
                <li>
                
                <a href="java.html" title="TrueType Font File parsing Java library">Java</a></li>
                
                
                <li>
                
                <a href="javascript.html" title="TrueType Font File parsing JavaScript library">JavaScript</a></li>
                
                
                <li class="active">
                
                <a href="lua.html" title="TrueType Font File parsing Lua library">Lua</a></li>
                
                
                <li>
                
                <a href="nim.html" title="TrueType Font File parsing Nim library">Nim</a></li>
                
                
                <li>
                
                <a href="perl.html" title="TrueType Font File parsing Perl library">Perl</a></li>
                
                
                <li>
                
                <a href="php.html" title="TrueType Font File parsing PHP library">PHP</a></li>
                
                
                <li>
                
                <a href="python.html" title="TrueType Font File parsing Python library">Python</a></li>
                
                
                <li>
                
                <a href="ruby.html" title="TrueType Font File parsing Ruby library">Ruby</a></li>
                
            </ul>
            </div>
        </div>
    </div>
</section>


<section id="format-lang" class="format">
    <div class="container">
        <h2>
            
            Lua source code to parse TrueType Font File
            
        </h2>

        

        <h3>ttf.lua</h3>

        <div class="row">
            <div class="pull-right">
                <p>
                    <a href="src/lua/ttf.lua" download="ttf.lua" class="btn btn-success">Download <i class="fa fa-download"></i></a>
                </p>
            </div>
        </div>

        <div class="row">
            <div class="highlight"><pre><span></span><span class="c1">-- This is a generated file! Please edit source .ksy file and use kaitai-struct-compiler to rebuild</span>
<span class="c1">--</span>
<span class="c1">-- This file is compatible with Lua 5.3</span>

<span class="kd">local</span> <span class="n">class</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">)</span>
<span class="nb">require</span><span class="p">(</span><span class="s2">&quot;kaitaistruct&quot;</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">str_decode</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">&quot;string_decode&quot;</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">enum</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">&quot;enum&quot;</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">stringstream</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">&quot;string_stream&quot;</span><span class="p">)</span>
<span class="kd">local</span> <span class="n">utils</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="s2">&quot;utils&quot;</span><span class="p">)</span>

<span class="c1">-- </span>
<span class="c1">-- A TrueType font file contains data, in table format, that comprises</span>
<span class="c1">-- an outline font.</span>
<span class="c1">-- See also: Source (https://web.archive.org/web/20160410081432/https://www.microsoft.com/typography/tt/ttf_spec/ttch02.doc)</span>
<span class="n">Ttf</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">offset_table</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">OffsetTable</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">directory_table</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">offset_table</span><span class="p">.</span><span class="n">num_tables</span> <span class="o">-</span> <span class="mi">1</span> <span class="kr">do</span>
    <span class="n">self</span><span class="p">.</span><span class="n">directory_table</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">DirTableEntry</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="kr">end</span>
<span class="kr">end</span>


<span class="n">Ttf</span><span class="p">.</span><span class="n">Post</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Post</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Post</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">format</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Fixed</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">italic_angle</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Fixed</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">underline_position</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">underline_thichness</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">is_fixed_pitch</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u4be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">min_mem_type42</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u4be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">max_mem_type42</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u4be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">min_mem_type1</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u4be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">max_mem_type1</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u4be</span><span class="p">()</span>
  <span class="kr">if</span>  <span class="p">((</span><span class="n">self</span><span class="p">.</span><span class="n">format</span><span class="p">.</span><span class="n">major</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">format</span><span class="p">.</span><span class="n">minor</span> <span class="o">==</span> <span class="mi">0</span><span class="p">))</span>  <span class="kr">then</span>
    <span class="n">self</span><span class="p">.</span><span class="n">format20</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Post</span><span class="p">.</span><span class="n">Format20</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="kr">end</span>
<span class="kr">end</span>


<span class="n">Ttf</span><span class="p">.</span><span class="n">Post</span><span class="p">.</span><span class="n">Format20</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Post</span><span class="p">.</span><span class="nc">Format20</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Post</span><span class="p">.</span><span class="nc">Format20</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">number_of_glyphs</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">glyph_name_index</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">number_of_glyphs</span> <span class="o">-</span> <span class="mi">1</span> <span class="kr">do</span>
    <span class="n">self</span><span class="p">.</span><span class="n">glyph_name_index</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="kr">end</span>
  <span class="n">self</span><span class="p">.</span><span class="n">glyph_names</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="kd">local</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="kr">while</span> <span class="kc">true</span> <span class="kr">do</span>
    <span class="kd">local</span> <span class="n">_</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Post</span><span class="p">.</span><span class="n">Format20</span><span class="p">.</span><span class="n">PascalString</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
    <span class="n">self</span><span class="p">.</span><span class="n">glyph_names</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">_</span>
    <span class="kr">if</span>  <span class="p">((</span><span class="n">_</span><span class="p">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">is_eof</span><span class="p">()))</span>  <span class="kr">then</span>
      <span class="kr">break</span>
    <span class="kr">end</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
  <span class="kr">end</span>
<span class="kr">end</span>


<span class="n">Ttf</span><span class="p">.</span><span class="n">Post</span><span class="p">.</span><span class="n">Format20</span><span class="p">.</span><span class="n">PascalString</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Post</span><span class="p">.</span><span class="nc">Format20</span><span class="p">.</span><span class="nc">PascalString</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Post</span><span class="p">.</span><span class="nc">Format20</span><span class="p">.</span><span class="nc">PascalString</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">length</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u1</span><span class="p">()</span>
  <span class="kr">if</span> <span class="n">self</span><span class="p">.</span><span class="n">length</span> <span class="o">~=</span> <span class="mi">0</span> <span class="kr">then</span>
    <span class="n">self</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">str_decode</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bytes</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">length</span><span class="p">),</span> <span class="s2">&quot;ascii&quot;</span><span class="p">)</span>
  <span class="kr">end</span>
<span class="kr">end</span>


<span class="c1">-- </span>
<span class="c1">-- Name table is meant to include human-readable string metadata</span>
<span class="c1">-- that describes font: name of the font, its styles, copyright &amp;</span>
<span class="c1">-- trademark notices, vendor and designer info, etc.</span>
<span class="c1">-- </span>
<span class="c1">-- The table includes a list of &quot;name records&quot;, each of which</span>
<span class="c1">-- corresponds to a single metadata entry.</span>
<span class="c1">-- See also: Source (https://developer.apple.com/fonts/TrueType-Reference-Manual/RM06/Chap6name.html)</span>
<span class="n">Ttf</span><span class="p">.</span><span class="n">Name</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">Name</span><span class="p">.</span><span class="n">Platforms</span> <span class="o">=</span> <span class="n">enum</span><span class="p">.</span><span class="n">Enum</span> <span class="p">{</span>
  <span class="n">unicode</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="n">macintosh</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="n">reserved_2</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
  <span class="n">microsoft</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">Name</span><span class="p">.</span><span class="n">Names</span> <span class="o">=</span> <span class="n">enum</span><span class="p">.</span><span class="n">Enum</span> <span class="p">{</span>
  <span class="n">copyright</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="n">font_family</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="n">font_subfamily</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
  <span class="n">unique_subfamily_id</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
  <span class="n">full_font_name</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
  <span class="n">name_table_version</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
  <span class="n">postscript_font_name</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
  <span class="n">trademark</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
  <span class="n">manufacturer</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
  <span class="n">designer</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
  <span class="n">description</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
  <span class="n">url_vendor</span> <span class="o">=</span> <span class="mi">11</span><span class="p">,</span>
  <span class="n">url_designer</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
  <span class="n">license</span> <span class="o">=</span> <span class="mi">13</span><span class="p">,</span>
  <span class="n">url_license</span> <span class="o">=</span> <span class="mi">14</span><span class="p">,</span>
  <span class="n">reserved_15</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
  <span class="n">preferred_family</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
  <span class="n">preferred_subfamily</span> <span class="o">=</span> <span class="mi">17</span><span class="p">,</span>
  <span class="n">compatible_full_name</span> <span class="o">=</span> <span class="mi">18</span><span class="p">,</span>
  <span class="n">sample_text</span> <span class="o">=</span> <span class="mi">19</span><span class="p">,</span>
<span class="p">}</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Name</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Name</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">format_selector</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">num_name_records</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">ofs_strings</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">name_records</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">num_name_records</span> <span class="o">-</span> <span class="mi">1</span> <span class="kr">do</span>
    <span class="n">self</span><span class="p">.</span><span class="n">name_records</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Name</span><span class="p">.</span><span class="n">NameRecord</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="kr">end</span>
<span class="kr">end</span>


<span class="n">Ttf</span><span class="p">.</span><span class="n">Name</span><span class="p">.</span><span class="n">NameRecord</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Name</span><span class="p">.</span><span class="nc">NameRecord</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Name</span><span class="p">.</span><span class="nc">NameRecord</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">platform_id</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Name</span><span class="p">.</span><span class="n">Platforms</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">())</span>
  <span class="n">self</span><span class="p">.</span><span class="n">encoding_id</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">language_id</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">name_id</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Name</span><span class="p">.</span><span class="n">Names</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">())</span>
  <span class="n">self</span><span class="p">.</span><span class="n">len_str</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">ofs_str</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
<span class="kr">end</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">Name</span><span class="p">.</span><span class="n">NameRecord</span><span class="p">.</span><span class="n">property</span><span class="p">.</span><span class="n">ascii_value</span> <span class="o">=</span> <span class="p">{}</span>
<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Name</span><span class="p">.</span><span class="nc">NameRecord</span><span class="p">.</span><span class="nc">property</span><span class="p">.</span><span class="nc">ascii_value</span><span class="p">:</span><span class="nf">get</span><span class="p">()</span>
  <span class="kr">if</span> <span class="n">self</span><span class="p">.</span><span class="n">_m_ascii_value</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="kr">then</span>
    <span class="kr">return</span> <span class="n">self</span><span class="p">.</span><span class="n">_m_ascii_value</span>
  <span class="kr">end</span>

  <span class="kd">local</span> <span class="n">_io</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_parent</span><span class="p">.</span><span class="n">_io</span>
  <span class="kd">local</span> <span class="n">_pos</span> <span class="o">=</span> <span class="n">_io</span><span class="p">:</span><span class="n">pos</span><span class="p">()</span>
  <span class="n">_io</span><span class="p">:</span><span class="n">seek</span><span class="p">((</span><span class="n">self</span><span class="p">.</span><span class="n">_parent</span><span class="p">.</span><span class="n">ofs_strings</span> <span class="o">+</span> <span class="n">self</span><span class="p">.</span><span class="n">ofs_str</span><span class="p">))</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_m_ascii_value</span> <span class="o">=</span> <span class="n">str_decode</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bytes</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">len_str</span><span class="p">),</span> <span class="s2">&quot;ascii&quot;</span><span class="p">)</span>
  <span class="n">_io</span><span class="p">:</span><span class="n">seek</span><span class="p">(</span><span class="n">_pos</span><span class="p">)</span>
  <span class="kr">return</span> <span class="n">self</span><span class="p">.</span><span class="n">_m_ascii_value</span>
<span class="kr">end</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">Name</span><span class="p">.</span><span class="n">NameRecord</span><span class="p">.</span><span class="n">property</span><span class="p">.</span><span class="n">unicode_value</span> <span class="o">=</span> <span class="p">{}</span>
<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Name</span><span class="p">.</span><span class="nc">NameRecord</span><span class="p">.</span><span class="nc">property</span><span class="p">.</span><span class="nc">unicode_value</span><span class="p">:</span><span class="nf">get</span><span class="p">()</span>
  <span class="kr">if</span> <span class="n">self</span><span class="p">.</span><span class="n">_m_unicode_value</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="kr">then</span>
    <span class="kr">return</span> <span class="n">self</span><span class="p">.</span><span class="n">_m_unicode_value</span>
  <span class="kr">end</span>

  <span class="kd">local</span> <span class="n">_io</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_parent</span><span class="p">.</span><span class="n">_io</span>
  <span class="kd">local</span> <span class="n">_pos</span> <span class="o">=</span> <span class="n">_io</span><span class="p">:</span><span class="n">pos</span><span class="p">()</span>
  <span class="n">_io</span><span class="p">:</span><span class="n">seek</span><span class="p">((</span><span class="n">self</span><span class="p">.</span><span class="n">_parent</span><span class="p">.</span><span class="n">ofs_strings</span> <span class="o">+</span> <span class="n">self</span><span class="p">.</span><span class="n">ofs_str</span><span class="p">))</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_m_unicode_value</span> <span class="o">=</span> <span class="n">str_decode</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bytes</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">len_str</span><span class="p">),</span> <span class="s2">&quot;utf-16be&quot;</span><span class="p">)</span>
  <span class="n">_io</span><span class="p">:</span><span class="n">seek</span><span class="p">(</span><span class="n">_pos</span><span class="p">)</span>
  <span class="kr">return</span> <span class="n">self</span><span class="p">.</span><span class="n">_m_unicode_value</span>
<span class="kr">end</span>


<span class="n">Ttf</span><span class="p">.</span><span class="n">Head</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">Head</span><span class="p">.</span><span class="n">Flags</span> <span class="o">=</span> <span class="n">enum</span><span class="p">.</span><span class="n">Enum</span> <span class="p">{</span>
  <span class="n">baseline_at_y0</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="n">left_sidebearing_at_x0</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
  <span class="n">flag_depend_on_point_size</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
  <span class="n">flag_force_ppem</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
  <span class="n">flag_may_advance_width</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">Head</span><span class="p">.</span><span class="n">FontDirectionHint</span> <span class="o">=</span> <span class="n">enum</span><span class="p">.</span><span class="n">Enum</span> <span class="p">{</span>
  <span class="n">fully_mixed_directional_glyphs</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="n">only_strongly_left_to_right</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="n">strongly_left_to_right_and_neutrals</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">}</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Head</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Head</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">version</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Fixed</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">font_revision</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Fixed</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">checksum_adjustment</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u4be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">magic_number</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bytes</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
  <span class="kr">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">magic_number</span> <span class="o">==</span> <span class="s2">&quot;</span><span class="se">\095\015\060\245</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kr">then</span>
    <span class="nb">error</span><span class="p">(</span><span class="s2">&quot;not equal, expected &quot;</span> <span class="o">..</span>  <span class="s2">&quot;</span><span class="se">\095\015\060\245</span><span class="s2">&quot;</span> <span class="o">..</span> <span class="s2">&quot;, but got &quot;</span> <span class="o">..</span> <span class="n">self</span><span class="p">.</span><span class="n">magic_number</span><span class="p">)</span>
  <span class="kr">end</span>
  <span class="n">self</span><span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Head</span><span class="p">.</span><span class="n">Flags</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">())</span>
  <span class="n">self</span><span class="p">.</span><span class="n">units_per_em</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">created</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u8be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">modified</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u8be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">x_min</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">y_min</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">x_max</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">y_max</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">mac_style</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">lowest_rec_ppem</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">font_direction_hint</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Head</span><span class="p">.</span><span class="n">FontDirectionHint</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">())</span>
  <span class="n">self</span><span class="p">.</span><span class="n">index_to_loc_format</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">glyph_data_format</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
<span class="kr">end</span>


<span class="n">Ttf</span><span class="p">.</span><span class="n">Prep</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Prep</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Prep</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">instructions</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bytes_full</span><span class="p">()</span>
<span class="kr">end</span>


<span class="n">Ttf</span><span class="p">.</span><span class="n">Hhea</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Hhea</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Hhea</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">version</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Fixed</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">ascender</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">descender</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">line_gap</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">advance_width_max</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">min_left_side_bearing</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">min_right_side_bearing</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">x_max_extend</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">caret_slope_rise</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">caret_slope_run</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">reserved</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bytes</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
  <span class="kr">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">reserved</span> <span class="o">==</span> <span class="s2">&quot;</span><span class="se">\000\000\000\000\000\000\000\000\000\000</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kr">then</span>
    <span class="nb">error</span><span class="p">(</span><span class="s2">&quot;not equal, expected &quot;</span> <span class="o">..</span>  <span class="s2">&quot;</span><span class="se">\000\000\000\000\000\000\000\000\000\000</span><span class="s2">&quot;</span> <span class="o">..</span> <span class="s2">&quot;, but got &quot;</span> <span class="o">..</span> <span class="n">self</span><span class="p">.</span><span class="n">reserved</span><span class="p">)</span>
  <span class="kr">end</span>
  <span class="n">self</span><span class="p">.</span><span class="n">metric_data_format</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">number_of_hmetrics</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
<span class="kr">end</span>

<span class="c1">-- </span>
<span class="c1">-- Typographic ascent.</span>
<span class="c1">-- </span>
<span class="c1">-- Typographic descent.</span>
<span class="c1">-- </span>
<span class="c1">-- Typographic line gap. Negative LineGap values are treated as zero in Windows 3.1, System 6, and System 7.</span>
<span class="c1">-- </span>
<span class="c1">-- Maximum advance width value in `hmtx` table.</span>
<span class="c1">-- </span>
<span class="c1">-- Minimum left sidebearing value in `hmtx` table.</span>
<span class="c1">-- </span>
<span class="c1">-- Minimum right sidebearing value; calculated as Min(aw - lsb - (xMax - xMin)).</span>
<span class="c1">-- </span>
<span class="c1">-- Max(lsb + (xMax - xMin)).</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">Fpgm</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Fpgm</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Fpgm</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">instructions</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bytes_full</span><span class="p">()</span>
<span class="kr">end</span>


<span class="n">Ttf</span><span class="p">.</span><span class="n">Kern</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Kern</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Kern</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">version</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">subtable_count</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">subtables</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">subtable_count</span> <span class="o">-</span> <span class="mi">1</span> <span class="kr">do</span>
    <span class="n">self</span><span class="p">.</span><span class="n">subtables</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Kern</span><span class="p">.</span><span class="n">Subtable</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="kr">end</span>
<span class="kr">end</span>


<span class="n">Ttf</span><span class="p">.</span><span class="n">Kern</span><span class="p">.</span><span class="n">Subtable</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Kern</span><span class="p">.</span><span class="nc">Subtable</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Kern</span><span class="p">.</span><span class="nc">Subtable</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">version</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">length</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">format</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u1</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">reserved</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">is_override</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">is_cross_stream</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">is_minimum</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">is_horizontal</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">align_to_byte</span><span class="p">()</span>
  <span class="kr">if</span> <span class="n">self</span><span class="p">.</span><span class="n">format</span> <span class="o">==</span> <span class="mi">0</span> <span class="kr">then</span>
    <span class="n">self</span><span class="p">.</span><span class="n">format0</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Kern</span><span class="p">.</span><span class="n">Subtable</span><span class="p">.</span><span class="n">Format0</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="kr">end</span>
<span class="kr">end</span>


<span class="n">Ttf</span><span class="p">.</span><span class="n">Kern</span><span class="p">.</span><span class="n">Subtable</span><span class="p">.</span><span class="n">Format0</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Kern</span><span class="p">.</span><span class="nc">Subtable</span><span class="p">.</span><span class="nc">Format0</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Kern</span><span class="p">.</span><span class="nc">Subtable</span><span class="p">.</span><span class="nc">Format0</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">pair_count</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">search_range</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">entry_selector</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">range_shift</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">kerning_pairs</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">pair_count</span> <span class="o">-</span> <span class="mi">1</span> <span class="kr">do</span>
    <span class="n">self</span><span class="p">.</span><span class="n">kerning_pairs</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Kern</span><span class="p">.</span><span class="n">Subtable</span><span class="p">.</span><span class="n">Format0</span><span class="p">.</span><span class="n">KerningPair</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="kr">end</span>
<span class="kr">end</span>


<span class="n">Ttf</span><span class="p">.</span><span class="n">Kern</span><span class="p">.</span><span class="n">Subtable</span><span class="p">.</span><span class="n">Format0</span><span class="p">.</span><span class="n">KerningPair</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Kern</span><span class="p">.</span><span class="nc">Subtable</span><span class="p">.</span><span class="nc">Format0</span><span class="p">.</span><span class="nc">KerningPair</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Kern</span><span class="p">.</span><span class="nc">Subtable</span><span class="p">.</span><span class="nc">Format0</span><span class="p">.</span><span class="nc">KerningPair</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
<span class="kr">end</span>


<span class="n">Ttf</span><span class="p">.</span><span class="n">DirTableEntry</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">DirTableEntry</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">DirTableEntry</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">tag</span> <span class="o">=</span> <span class="n">str_decode</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bytes</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="s2">&quot;ascii&quot;</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">checksum</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u4be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u4be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">length</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u4be</span><span class="p">()</span>
<span class="kr">end</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">DirTableEntry</span><span class="p">.</span><span class="n">property</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">{}</span>
<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">DirTableEntry</span><span class="p">.</span><span class="nc">property</span><span class="p">.</span><span class="nc">value</span><span class="p">:</span><span class="nf">get</span><span class="p">()</span>
  <span class="kr">if</span> <span class="n">self</span><span class="p">.</span><span class="n">_m_value</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="kr">then</span>
    <span class="kr">return</span> <span class="n">self</span><span class="p">.</span><span class="n">_m_value</span>
  <span class="kr">end</span>

  <span class="kd">local</span> <span class="n">_io</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">.</span><span class="n">_io</span>
  <span class="kd">local</span> <span class="n">_pos</span> <span class="o">=</span> <span class="n">_io</span><span class="p">:</span><span class="n">pos</span><span class="p">()</span>
  <span class="n">_io</span><span class="p">:</span><span class="n">seek</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">offset</span><span class="p">)</span>
  <span class="kd">local</span> <span class="n">_on</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">tag</span>
  <span class="kr">if</span> <span class="n">_on</span> <span class="o">==</span> <span class="s2">&quot;head&quot;</span> <span class="kr">then</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_raw__m_value</span> <span class="o">=</span> <span class="n">_io</span><span class="p">:</span><span class="n">read_bytes</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">length</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">_io</span> <span class="o">=</span> <span class="n">KaitaiStream</span><span class="p">(</span><span class="n">stringstream</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_raw__m_value</span><span class="p">))</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_m_value</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Head</span><span class="p">(</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="kr">elseif</span> <span class="n">_on</span> <span class="o">==</span> <span class="s2">&quot;cvt &quot;</span> <span class="kr">then</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_raw__m_value</span> <span class="o">=</span> <span class="n">_io</span><span class="p">:</span><span class="n">read_bytes</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">length</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">_io</span> <span class="o">=</span> <span class="n">KaitaiStream</span><span class="p">(</span><span class="n">stringstream</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_raw__m_value</span><span class="p">))</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_m_value</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Cvt</span><span class="p">(</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="kr">elseif</span> <span class="n">_on</span> <span class="o">==</span> <span class="s2">&quot;prep&quot;</span> <span class="kr">then</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_raw__m_value</span> <span class="o">=</span> <span class="n">_io</span><span class="p">:</span><span class="n">read_bytes</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">length</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">_io</span> <span class="o">=</span> <span class="n">KaitaiStream</span><span class="p">(</span><span class="n">stringstream</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_raw__m_value</span><span class="p">))</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_m_value</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Prep</span><span class="p">(</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="kr">elseif</span> <span class="n">_on</span> <span class="o">==</span> <span class="s2">&quot;kern&quot;</span> <span class="kr">then</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_raw__m_value</span> <span class="o">=</span> <span class="n">_io</span><span class="p">:</span><span class="n">read_bytes</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">length</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">_io</span> <span class="o">=</span> <span class="n">KaitaiStream</span><span class="p">(</span><span class="n">stringstream</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_raw__m_value</span><span class="p">))</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_m_value</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Kern</span><span class="p">(</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="kr">elseif</span> <span class="n">_on</span> <span class="o">==</span> <span class="s2">&quot;hhea&quot;</span> <span class="kr">then</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_raw__m_value</span> <span class="o">=</span> <span class="n">_io</span><span class="p">:</span><span class="n">read_bytes</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">length</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">_io</span> <span class="o">=</span> <span class="n">KaitaiStream</span><span class="p">(</span><span class="n">stringstream</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_raw__m_value</span><span class="p">))</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_m_value</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Hhea</span><span class="p">(</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="kr">elseif</span> <span class="n">_on</span> <span class="o">==</span> <span class="s2">&quot;post&quot;</span> <span class="kr">then</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_raw__m_value</span> <span class="o">=</span> <span class="n">_io</span><span class="p">:</span><span class="n">read_bytes</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">length</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">_io</span> <span class="o">=</span> <span class="n">KaitaiStream</span><span class="p">(</span><span class="n">stringstream</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_raw__m_value</span><span class="p">))</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_m_value</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Post</span><span class="p">(</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="kr">elseif</span> <span class="n">_on</span> <span class="o">==</span> <span class="s2">&quot;OS/2&quot;</span> <span class="kr">then</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_raw__m_value</span> <span class="o">=</span> <span class="n">_io</span><span class="p">:</span><span class="n">read_bytes</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">length</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">_io</span> <span class="o">=</span> <span class="n">KaitaiStream</span><span class="p">(</span><span class="n">stringstream</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_raw__m_value</span><span class="p">))</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_m_value</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">(</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="kr">elseif</span> <span class="n">_on</span> <span class="o">==</span> <span class="s2">&quot;name&quot;</span> <span class="kr">then</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_raw__m_value</span> <span class="o">=</span> <span class="n">_io</span><span class="p">:</span><span class="n">read_bytes</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">length</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">_io</span> <span class="o">=</span> <span class="n">KaitaiStream</span><span class="p">(</span><span class="n">stringstream</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_raw__m_value</span><span class="p">))</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_m_value</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Name</span><span class="p">(</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="kr">elseif</span> <span class="n">_on</span> <span class="o">==</span> <span class="s2">&quot;maxp&quot;</span> <span class="kr">then</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_raw__m_value</span> <span class="o">=</span> <span class="n">_io</span><span class="p">:</span><span class="n">read_bytes</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">length</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">_io</span> <span class="o">=</span> <span class="n">KaitaiStream</span><span class="p">(</span><span class="n">stringstream</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_raw__m_value</span><span class="p">))</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_m_value</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Maxp</span><span class="p">(</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="kr">elseif</span> <span class="n">_on</span> <span class="o">==</span> <span class="s2">&quot;glyf&quot;</span> <span class="kr">then</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_raw__m_value</span> <span class="o">=</span> <span class="n">_io</span><span class="p">:</span><span class="n">read_bytes</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">length</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">_io</span> <span class="o">=</span> <span class="n">KaitaiStream</span><span class="p">(</span><span class="n">stringstream</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_raw__m_value</span><span class="p">))</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_m_value</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Glyf</span><span class="p">(</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="kr">elseif</span> <span class="n">_on</span> <span class="o">==</span> <span class="s2">&quot;fpgm&quot;</span> <span class="kr">then</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_raw__m_value</span> <span class="o">=</span> <span class="n">_io</span><span class="p">:</span><span class="n">read_bytes</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">length</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">_io</span> <span class="o">=</span> <span class="n">KaitaiStream</span><span class="p">(</span><span class="n">stringstream</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_raw__m_value</span><span class="p">))</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_m_value</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Fpgm</span><span class="p">(</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="kr">elseif</span> <span class="n">_on</span> <span class="o">==</span> <span class="s2">&quot;cmap&quot;</span> <span class="kr">then</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_raw__m_value</span> <span class="o">=</span> <span class="n">_io</span><span class="p">:</span><span class="n">read_bytes</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">length</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">_io</span> <span class="o">=</span> <span class="n">KaitaiStream</span><span class="p">(</span><span class="n">stringstream</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_raw__m_value</span><span class="p">))</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_m_value</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Cmap</span><span class="p">(</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="kr">else</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_m_value</span> <span class="o">=</span> <span class="n">_io</span><span class="p">:</span><span class="n">read_bytes</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">length</span><span class="p">)</span>
  <span class="kr">end</span>
  <span class="n">_io</span><span class="p">:</span><span class="n">seek</span><span class="p">(</span><span class="n">_pos</span><span class="p">)</span>
  <span class="kr">return</span> <span class="n">self</span><span class="p">.</span><span class="n">_m_value</span>
<span class="kr">end</span>


<span class="c1">-- </span>
<span class="c1">-- The OS/2 table consists of a set of metrics that are required by Windows and OS/2.</span>
<span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">WeightClass</span> <span class="o">=</span> <span class="n">enum</span><span class="p">.</span><span class="n">Enum</span> <span class="p">{</span>
  <span class="n">thin</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
  <span class="n">extra_light</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span>
  <span class="n">light</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span>
  <span class="n">normal</span> <span class="o">=</span> <span class="mi">400</span><span class="p">,</span>
  <span class="n">medium</span> <span class="o">=</span> <span class="mi">500</span><span class="p">,</span>
  <span class="n">semi_bold</span> <span class="o">=</span> <span class="mi">600</span><span class="p">,</span>
  <span class="n">bold</span> <span class="o">=</span> <span class="mi">700</span><span class="p">,</span>
  <span class="n">extra_bold</span> <span class="o">=</span> <span class="mi">800</span><span class="p">,</span>
  <span class="n">black</span> <span class="o">=</span> <span class="mi">900</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">WidthClass</span> <span class="o">=</span> <span class="n">enum</span><span class="p">.</span><span class="n">Enum</span> <span class="p">{</span>
  <span class="n">ultra_condensed</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="n">extra_condensed</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
  <span class="n">condensed</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
  <span class="n">semi_condensed</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
  <span class="n">normal</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
  <span class="n">semi_expanded</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
  <span class="n">expanded</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
  <span class="n">extra_expanded</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
  <span class="n">ultra_expanded</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">FsType</span> <span class="o">=</span> <span class="n">enum</span><span class="p">.</span><span class="n">Enum</span> <span class="p">{</span>
  <span class="n">restricted_license_embedding</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
  <span class="n">preview_and_print_embedding</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
  <span class="n">editable_embedding</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">FsSelection</span> <span class="o">=</span> <span class="n">enum</span><span class="p">.</span><span class="n">Enum</span> <span class="p">{</span>
  <span class="n">italic</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="n">underscore</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
  <span class="n">negative</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
  <span class="n">outlined</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
  <span class="n">strikeout</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
  <span class="n">bold</span> <span class="o">=</span> <span class="mi">32</span><span class="p">,</span>
  <span class="n">regular</span> <span class="o">=</span> <span class="mi">64</span><span class="p">,</span>
<span class="p">}</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Os2</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Os2</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">version</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">x_avg_char_width</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">weight_class</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">WeightClass</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">())</span>
  <span class="n">self</span><span class="p">.</span><span class="n">width_class</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">WidthClass</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">())</span>
  <span class="n">self</span><span class="p">.</span><span class="n">fs_type</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">FsType</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">())</span>
  <span class="n">self</span><span class="p">.</span><span class="n">y_subscript_x_size</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">y_subscript_y_size</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">y_subscript_x_offset</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">y_subscript_y_offset</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">y_superscript_x_size</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">y_superscript_y_size</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">y_superscript_x_offset</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">y_superscript_y_offset</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">y_strikeout_size</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">y_strikeout_position</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">s_family_class</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">panose</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">Panose</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">unicode_range</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">UnicodeRange</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">ach_vend_id</span> <span class="o">=</span> <span class="n">str_decode</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bytes</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="s2">&quot;ascii&quot;</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">selection</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">FsSelection</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">())</span>
  <span class="n">self</span><span class="p">.</span><span class="n">first_char_index</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">last_char_index</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">typo_ascender</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">typo_descender</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">typo_line_gap</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">win_ascent</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">win_descent</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">code_page_range</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">CodePageRange</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
<span class="kr">end</span>

<span class="c1">-- </span>
<span class="c1">-- The version number for this OS/2 table.</span>
<span class="c1">-- </span>
<span class="c1">-- The Average Character Width parameter specifies the arithmetic average of the escapement (width) of all of the 26 lowercase letters a through z of the Latin alphabet and the space character. If any of the 26 lowercase letters are not present, this parameter should equal the weighted average of all glyphs in the font. For non-UGL (platform 3, encoding 0) fonts, use the unweighted average.</span>
<span class="c1">-- </span>
<span class="c1">-- Indicates the visual weight (degree of blackness or thickness of strokes) of the characters in the font.</span>
<span class="c1">-- </span>
<span class="c1">-- Indicates a relative change from the normal aspect ratio (width to height ratio) as specified by a font designer for the glyphs in a font.</span>
<span class="c1">-- </span>
<span class="c1">-- Indicates font embedding licensing rights for the font. Embeddable fonts may be stored in a document. When a document with embedded fonts is opened on a system that does not have the font installed (the remote system), the embedded font may be loaded for temporary (and in some cases, permanent) use on that system by an embedding-aware application. Embedding licensing rights are granted by the vendor of the font.</span>
<span class="c1">-- </span>
<span class="c1">-- The recommended horizontal size in font design units for subscripts for this font.</span>
<span class="c1">-- </span>
<span class="c1">-- The recommended vertical size in font design units for subscripts for this font.</span>
<span class="c1">-- </span>
<span class="c1">-- The recommended horizontal offset in font design untis for subscripts for this font.</span>
<span class="c1">-- </span>
<span class="c1">-- The recommended vertical offset in font design units from the baseline for subscripts for this font.</span>
<span class="c1">-- </span>
<span class="c1">-- The recommended horizontal size in font design units for superscripts for this font.</span>
<span class="c1">-- </span>
<span class="c1">-- The recommended vertical size in font design units for superscripts for this font.</span>
<span class="c1">-- </span>
<span class="c1">-- The recommended horizontal offset in font design units for superscripts for this font.</span>
<span class="c1">-- </span>
<span class="c1">-- The recommended vertical offset in font design units from the baseline for superscripts for this font.</span>
<span class="c1">-- </span>
<span class="c1">-- Width of the strikeout stroke in font design units.</span>
<span class="c1">-- </span>
<span class="c1">-- The position of the strikeout stroke relative to the baseline in font design units.</span>
<span class="c1">-- </span>
<span class="c1">-- This parameter is a classification of font-family design.</span>
<span class="c1">-- </span>
<span class="c1">-- The four character identifier for the vendor of the given type face.</span>
<span class="c1">-- </span>
<span class="c1">-- Contains information concerning the nature of the font patterns.</span>
<span class="c1">-- </span>
<span class="c1">-- The minimum Unicode index (character code) in this font, according to the cmap subtable for platform ID 3 and encoding ID 0 or 1.</span>
<span class="c1">-- </span>
<span class="c1">-- The maximum Unicode index (character code) in this font, according to the cmap subtable for platform ID 3 and encoding ID 0 or 1.</span>
<span class="c1">-- </span>
<span class="c1">-- The typographic ascender for this font.</span>
<span class="c1">-- </span>
<span class="c1">-- The typographic descender for this font.</span>
<span class="c1">-- </span>
<span class="c1">-- The typographic line gap for this font.</span>
<span class="c1">-- </span>
<span class="c1">-- The ascender metric for Windows.</span>
<span class="c1">-- </span>
<span class="c1">-- The descender metric for Windows.</span>
<span class="c1">-- </span>
<span class="c1">-- This field is used to specify the code pages encompassed by the font file in the `cmap` subtable for platform 3, encoding ID 1 (Microsoft platform).</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">Panose</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">Panose</span><span class="p">.</span><span class="n">Weight</span> <span class="o">=</span> <span class="n">enum</span><span class="p">.</span><span class="n">Enum</span> <span class="p">{</span>
  <span class="n">any</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="n">no_fit</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="n">very_light</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
  <span class="n">light</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
  <span class="n">thin</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
  <span class="n">book</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
  <span class="n">medium</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
  <span class="n">demi</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
  <span class="n">bold</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
  <span class="n">heavy</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
  <span class="n">black</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
  <span class="n">nord</span> <span class="o">=</span> <span class="mi">11</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">Panose</span><span class="p">.</span><span class="n">Proportion</span> <span class="o">=</span> <span class="n">enum</span><span class="p">.</span><span class="n">Enum</span> <span class="p">{</span>
  <span class="n">any</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="n">no_fit</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="n">old_style</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
  <span class="n">modern</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
  <span class="n">even_width</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
  <span class="n">expanded</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
  <span class="n">condensed</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
  <span class="n">very_expanded</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
  <span class="n">very_condensed</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
  <span class="n">monospaced</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">Panose</span><span class="p">.</span><span class="n">FamilyKind</span> <span class="o">=</span> <span class="n">enum</span><span class="p">.</span><span class="n">Enum</span> <span class="p">{</span>
  <span class="n">any</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="n">no_fit</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="n">text_and_display</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
  <span class="n">script</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
  <span class="n">decorative</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
  <span class="n">pictorial</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">Panose</span><span class="p">.</span><span class="n">LetterForm</span> <span class="o">=</span> <span class="n">enum</span><span class="p">.</span><span class="n">Enum</span> <span class="p">{</span>
  <span class="n">any</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="n">no_fit</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="n">normal_contact</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
  <span class="n">normal_weighted</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
  <span class="n">normal_boxed</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
  <span class="n">normal_flattened</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
  <span class="n">normal_rounded</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
  <span class="n">normal_off_center</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
  <span class="n">normal_square</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
  <span class="n">oblique_contact</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
  <span class="n">oblique_weighted</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
  <span class="n">oblique_boxed</span> <span class="o">=</span> <span class="mi">11</span><span class="p">,</span>
  <span class="n">oblique_flattened</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
  <span class="n">oblique_rounded</span> <span class="o">=</span> <span class="mi">13</span><span class="p">,</span>
  <span class="n">oblique_off_center</span> <span class="o">=</span> <span class="mi">14</span><span class="p">,</span>
  <span class="n">oblique_square</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">Panose</span><span class="p">.</span><span class="n">SerifStyle</span> <span class="o">=</span> <span class="n">enum</span><span class="p">.</span><span class="n">Enum</span> <span class="p">{</span>
  <span class="n">any</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="n">no_fit</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="n">cove</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
  <span class="n">obtuse_cove</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
  <span class="n">square_cove</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
  <span class="n">obtuse_square_cove</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
  <span class="n">square</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
  <span class="n">thin</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
  <span class="n">bone</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
  <span class="n">exaggerated</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
  <span class="n">triangle</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
  <span class="n">normal_sans</span> <span class="o">=</span> <span class="mi">11</span><span class="p">,</span>
  <span class="n">obtuse_sans</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
  <span class="n">perp_sans</span> <span class="o">=</span> <span class="mi">13</span><span class="p">,</span>
  <span class="n">flared</span> <span class="o">=</span> <span class="mi">14</span><span class="p">,</span>
  <span class="n">rounded</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">Panose</span><span class="p">.</span><span class="n">XHeight</span> <span class="o">=</span> <span class="n">enum</span><span class="p">.</span><span class="n">Enum</span> <span class="p">{</span>
  <span class="n">any</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="n">no_fit</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="n">constant_small</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
  <span class="n">constant_standard</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
  <span class="n">constant_large</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
  <span class="n">ducking_small</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
  <span class="n">ducking_standard</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
  <span class="n">ducking_large</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">Panose</span><span class="p">.</span><span class="n">ArmStyle</span> <span class="o">=</span> <span class="n">enum</span><span class="p">.</span><span class="n">Enum</span> <span class="p">{</span>
  <span class="n">any</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="n">no_fit</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="n">straight_arms_horizontal</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
  <span class="n">straight_arms_wedge</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
  <span class="n">straight_arms_vertical</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
  <span class="n">straight_arms_single_serif</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
  <span class="n">straight_arms_double_serif</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
  <span class="n">non_straight_arms_horizontal</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
  <span class="n">non_straight_arms_wedge</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
  <span class="n">non_straight_arms_vertical</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
  <span class="n">non_straight_arms_single_serif</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
  <span class="n">non_straight_arms_double_serif</span> <span class="o">=</span> <span class="mi">11</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">Panose</span><span class="p">.</span><span class="n">StrokeVariation</span> <span class="o">=</span> <span class="n">enum</span><span class="p">.</span><span class="n">Enum</span> <span class="p">{</span>
  <span class="n">any</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="n">no_fit</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="n">gradual_diagonal</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
  <span class="n">gradual_transitional</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
  <span class="n">gradual_vertical</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
  <span class="n">gradual_horizontal</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
  <span class="n">rapid_vertical</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
  <span class="n">rapid_horizontal</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
  <span class="n">instant_vertical</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">Panose</span><span class="p">.</span><span class="n">Contrast</span> <span class="o">=</span> <span class="n">enum</span><span class="p">.</span><span class="n">Enum</span> <span class="p">{</span>
  <span class="n">any</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="n">no_fit</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="n">none</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
  <span class="n">very_low</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
  <span class="n">low</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
  <span class="n">medium_low</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
  <span class="n">medium</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
  <span class="n">medium_high</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
  <span class="n">high</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
  <span class="n">very_high</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">Panose</span><span class="p">.</span><span class="n">Midline</span> <span class="o">=</span> <span class="n">enum</span><span class="p">.</span><span class="n">Enum</span> <span class="p">{</span>
  <span class="n">any</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="n">no_fit</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="n">standard_trimmed</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
  <span class="n">standard_pointed</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
  <span class="n">standard_serifed</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
  <span class="n">high_trimmed</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
  <span class="n">high_pointed</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
  <span class="n">high_serifed</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
  <span class="n">constant_trimmed</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
  <span class="n">constant_pointed</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
  <span class="n">constant_serifed</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
  <span class="n">low_trimmed</span> <span class="o">=</span> <span class="mi">11</span><span class="p">,</span>
  <span class="n">low_pointed</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
  <span class="n">low_serifed</span> <span class="o">=</span> <span class="mi">13</span><span class="p">,</span>
<span class="p">}</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Os2</span><span class="p">.</span><span class="nc">Panose</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Os2</span><span class="p">.</span><span class="nc">Panose</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">family_type</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">Panose</span><span class="p">.</span><span class="n">FamilyKind</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u1</span><span class="p">())</span>
  <span class="n">self</span><span class="p">.</span><span class="n">serif_style</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">Panose</span><span class="p">.</span><span class="n">SerifStyle</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u1</span><span class="p">())</span>
  <span class="n">self</span><span class="p">.</span><span class="n">weight</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">Panose</span><span class="p">.</span><span class="n">Weight</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u1</span><span class="p">())</span>
  <span class="n">self</span><span class="p">.</span><span class="n">proportion</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">Panose</span><span class="p">.</span><span class="n">Proportion</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u1</span><span class="p">())</span>
  <span class="n">self</span><span class="p">.</span><span class="n">contrast</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">Panose</span><span class="p">.</span><span class="n">Contrast</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u1</span><span class="p">())</span>
  <span class="n">self</span><span class="p">.</span><span class="n">stroke_variation</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">Panose</span><span class="p">.</span><span class="n">StrokeVariation</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u1</span><span class="p">())</span>
  <span class="n">self</span><span class="p">.</span><span class="n">arm_style</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">Panose</span><span class="p">.</span><span class="n">ArmStyle</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u1</span><span class="p">())</span>
  <span class="n">self</span><span class="p">.</span><span class="n">letter_form</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">Panose</span><span class="p">.</span><span class="n">LetterForm</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u1</span><span class="p">())</span>
  <span class="n">self</span><span class="p">.</span><span class="n">midline</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">Panose</span><span class="p">.</span><span class="n">Midline</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u1</span><span class="p">())</span>
  <span class="n">self</span><span class="p">.</span><span class="n">x_height</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">Panose</span><span class="p">.</span><span class="n">XHeight</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u1</span><span class="p">())</span>
<span class="kr">end</span>


<span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">UnicodeRange</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Os2</span><span class="p">.</span><span class="nc">UnicodeRange</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Os2</span><span class="p">.</span><span class="nc">UnicodeRange</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">basic_latin</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">latin_1_supplement</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">latin_extended_a</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">latin_extended_b</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">ipa_extensions</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">spacing_modifier_letters</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">combining_diacritical_marks</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">basic_greek</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">greek_symbols_and_coptic</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cyrillic</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">armenian</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">basic_hebrew</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">hebrew_extended</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">basic_arabic</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">arabic_extended</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">devanagari</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">bengali</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">gurmukhi</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">gujarati</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">oriya</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">tamil</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">telugu</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">kannada</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">malayalam</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">thai</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">lao</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">basic_georgian</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">georgian_extended</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">hangul_jamo</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">latin_extended_additional</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">greek_extended</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">general_punctuation</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">superscripts_and_subscripts</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">currency_symbols</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">combining_diacritical_marks_for_symbols</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">letterlike_symbols</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">number_forms</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">arrows</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">mathematical_operators</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">miscellaneous_technical</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">control_pictures</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">optical_character_recognition</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">enclosed_alphanumerics</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">box_drawing</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">block_elements</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">geometric_shapes</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">miscellaneous_symbols</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">dingbats</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cjk_symbols_and_punctuation</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">hiragana</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">katakana</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">bopomofo</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">hangul_compatibility_jamo</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cjk_miscellaneous</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">enclosed_cjk_letters_and_months</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cjk_compatibility</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">hangul</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">reserved_for_unicode_subranges1</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">reserved_for_unicode_subranges2</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cjk_unified_ideographs</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">private_use_area</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cjk_compatibility_ideographs</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">alphabetic_presentation_forms</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">arabic_presentation_forms_a</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">combining_half_marks</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cjk_compatibility_forms</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">small_form_variants</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">arabic_presentation_forms_b</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">halfwidth_and_fullwidth_forms</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">specials</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">align_to_byte</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">reserved</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bytes</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="kr">end</span>


<span class="n">Ttf</span><span class="p">.</span><span class="n">Os2</span><span class="p">.</span><span class="n">CodePageRange</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Os2</span><span class="p">.</span><span class="nc">CodePageRange</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Os2</span><span class="p">.</span><span class="nc">CodePageRange</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">symbol_character_set</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">oem_character_set</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">macintosh_character_set</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">reserved_for_alternate_ansi_oem</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp1361_korean_johab</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp950_chinese_traditional_chars_taiwan_and_hong_kong</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp949_korean_wansung</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp936_chinese_simplified_chars_prc_and_singapore</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp932_jis_japan</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp874_thai</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">reserved_for_alternate_ansi</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp1257_windows_baltic</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp1256_arabic</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp1255_hebrew</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp1254_turkish</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp1253_greek</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp1251_cyrillic</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp1250_latin_2_eastern_europe</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp1252_latin_1</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp437_us</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp850_we_latin_1</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp708_arabic_asmo_708</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp737_greek_former_437_g</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp775_ms_dos_baltic</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp852_latin_2</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp855_ibm_cyrillic_primarily_russian</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp857_ibm_turkish</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp860_ms_dos_portuguese</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp861_ms_dos_icelandic</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp862_hebrew</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp863_ms_dos_canadian_french</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp864_arabic</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp865_ms_dos_nordic</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp866_ms_dos_russian</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">cp869_ibm_greek</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">reserved_for_oem</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
<span class="kr">end</span>


<span class="n">Ttf</span><span class="p">.</span><span class="n">Fixed</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Fixed</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Fixed</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">major</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">minor</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
<span class="kr">end</span>


<span class="n">Ttf</span><span class="p">.</span><span class="n">Glyf</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Glyf</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Glyf</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">number_of_contours</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">x_min</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">y_min</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">x_max</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">y_max</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
  <span class="kr">if</span> <span class="n">self</span><span class="p">.</span><span class="n">number_of_contours</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="kr">then</span>
    <span class="n">self</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Glyf</span><span class="p">.</span><span class="n">SimpleGlyph</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="kr">end</span>
<span class="kr">end</span>


<span class="n">Ttf</span><span class="p">.</span><span class="n">Glyf</span><span class="p">.</span><span class="n">SimpleGlyph</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Glyf</span><span class="p">.</span><span class="nc">SimpleGlyph</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Glyf</span><span class="p">.</span><span class="nc">SimpleGlyph</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">end_pts_of_contours</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_parent</span><span class="p">.</span><span class="n">number_of_contours</span> <span class="o">-</span> <span class="mi">1</span> <span class="kr">do</span>
    <span class="n">self</span><span class="p">.</span><span class="n">end_pts_of_contours</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="kr">end</span>
  <span class="n">self</span><span class="p">.</span><span class="n">instruction_length</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">instructions</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bytes</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">instruction_length</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">point_count</span> <span class="o">-</span> <span class="mi">1</span> <span class="kr">do</span>
    <span class="n">self</span><span class="p">.</span><span class="n">flags</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Glyf</span><span class="p">.</span><span class="n">SimpleGlyph</span><span class="p">.</span><span class="n">Flag</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="kr">end</span>
<span class="kr">end</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">Glyf</span><span class="p">.</span><span class="n">SimpleGlyph</span><span class="p">.</span><span class="n">property</span><span class="p">.</span><span class="n">point_count</span> <span class="o">=</span> <span class="p">{}</span>
<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Glyf</span><span class="p">.</span><span class="nc">SimpleGlyph</span><span class="p">.</span><span class="nc">property</span><span class="p">.</span><span class="nc">point_count</span><span class="p">:</span><span class="nf">get</span><span class="p">()</span>
  <span class="kr">if</span> <span class="n">self</span><span class="p">.</span><span class="n">_m_point_count</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="kr">then</span>
    <span class="kr">return</span> <span class="n">self</span><span class="p">.</span><span class="n">_m_point_count</span>
  <span class="kr">end</span>

  <span class="n">self</span><span class="p">.</span><span class="n">_m_point_count</span> <span class="o">=</span> <span class="p">(</span><span class="n">utils</span><span class="p">.</span><span class="n">array_max</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">end_pts_of_contours</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
  <span class="kr">return</span> <span class="n">self</span><span class="p">.</span><span class="n">_m_point_count</span>
<span class="kr">end</span>


<span class="n">Ttf</span><span class="p">.</span><span class="n">Glyf</span><span class="p">.</span><span class="n">SimpleGlyph</span><span class="p">.</span><span class="n">Flag</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Glyf</span><span class="p">.</span><span class="nc">SimpleGlyph</span><span class="p">.</span><span class="nc">Flag</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Glyf</span><span class="p">.</span><span class="nc">SimpleGlyph</span><span class="p">.</span><span class="nc">Flag</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">reserved</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">y_is_same</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">x_is_same</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">repeat</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">y_short_vector</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">x_short_vector</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">on_curve</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bits_int_be</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">~=</span> <span class="mi">0</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">align_to_byte</span><span class="p">()</span>
  <span class="kr">if</span> <span class="n">self</span><span class="p">.</span><span class="n">repeat</span> <span class="kr">then</span>
    <span class="n">self</span><span class="p">.</span><span class="n">repeat_value</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u1</span><span class="p">()</span>
  <span class="kr">end</span>
<span class="kr">end</span>


<span class="c1">-- </span>
<span class="c1">-- cvt  - Control Value Table This table contains a list of values that can be referenced by instructions. They can be used, among other things, to control characteristics for different glyphs.</span>
<span class="n">Ttf</span><span class="p">.</span><span class="n">Cvt</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Cvt</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Cvt</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">fwords</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="kd">local</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="kr">while</span> <span class="ow">not</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">is_eof</span><span class="p">()</span> <span class="kr">do</span>
    <span class="n">self</span><span class="p">.</span><span class="n">fwords</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_s2be</span><span class="p">()</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
  <span class="kr">end</span>
<span class="kr">end</span>


<span class="n">Ttf</span><span class="p">.</span><span class="n">Maxp</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Maxp</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Maxp</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">table_version_number</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Fixed</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">num_glyphs</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="kr">if</span> <span class="n">self</span><span class="p">.</span><span class="n">is_version10</span> <span class="kr">then</span>
    <span class="n">self</span><span class="p">.</span><span class="n">version10_body</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">MaxpVersion10Body</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="kr">end</span>
<span class="kr">end</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">Maxp</span><span class="p">.</span><span class="n">property</span><span class="p">.</span><span class="n">is_version10</span> <span class="o">=</span> <span class="p">{}</span>
<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Maxp</span><span class="p">.</span><span class="nc">property</span><span class="p">.</span><span class="nc">is_version10</span><span class="p">:</span><span class="nf">get</span><span class="p">()</span>
  <span class="kr">if</span> <span class="n">self</span><span class="p">.</span><span class="n">_m_is_version10</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="kr">then</span>
    <span class="kr">return</span> <span class="n">self</span><span class="p">.</span><span class="n">_m_is_version10</span>
  <span class="kr">end</span>

  <span class="n">self</span><span class="p">.</span><span class="n">_m_is_version10</span> <span class="o">=</span>  <span class="p">((</span><span class="n">self</span><span class="p">.</span><span class="n">table_version_number</span><span class="p">.</span><span class="n">major</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">table_version_number</span><span class="p">.</span><span class="n">minor</span> <span class="o">==</span> <span class="mi">0</span><span class="p">))</span> 
  <span class="kr">return</span> <span class="n">self</span><span class="p">.</span><span class="n">_m_is_version10</span>
<span class="kr">end</span>

<span class="c1">-- </span>
<span class="c1">-- 0x00010000 for version 1.0.</span>
<span class="c1">-- </span>
<span class="c1">-- The number of glyphs in the font.</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">MaxpVersion10Body</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">MaxpVersion10Body</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">MaxpVersion10Body</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">max_points</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">max_contours</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">max_composite_points</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">max_composite_contours</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">max_zones</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">max_twilight_points</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">max_storage</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">max_function_defs</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">max_instruction_defs</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">max_stack_elements</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">max_size_of_instructions</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">max_component_elements</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">max_component_depth</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
<span class="kr">end</span>

<span class="c1">-- </span>
<span class="c1">-- Maximum points in a non-composite glyph.</span>
<span class="c1">-- </span>
<span class="c1">-- Maximum contours in a non-composite glyph.</span>
<span class="c1">-- </span>
<span class="c1">-- Maximum points in a composite glyph.</span>
<span class="c1">-- </span>
<span class="c1">-- Maximum contours in a composite glyph.</span>
<span class="c1">-- </span>
<span class="c1">-- 1 if instructions do not use the twilight zone (Z0), or 2 if instructions do use Z0; should be set to 2 in most cases.</span>
<span class="c1">-- </span>
<span class="c1">-- Maximum points used in Z0.</span>
<span class="c1">-- </span>
<span class="c1">-- Number of Storage Area locations.</span>
<span class="c1">-- </span>
<span class="c1">-- Number of FDEFs.</span>
<span class="c1">-- </span>
<span class="c1">-- Number of IDEFs.</span>
<span class="c1">-- </span>
<span class="c1">-- Maximum stack depth.</span>
<span class="c1">-- </span>
<span class="c1">-- Maximum byte count for glyph instructions.</span>
<span class="c1">-- </span>
<span class="c1">-- Maximum number of components referenced at &quot;top level&quot; for any composite glyph.</span>
<span class="c1">-- </span>
<span class="c1">-- Maximum levels of recursion; 1 for simple components.</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">OffsetTable</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">OffsetTable</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">OffsetTable</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">sfnt_version</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Fixed</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">num_tables</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">search_range</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">entry_selector</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">range_shift</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
<span class="kr">end</span>


<span class="c1">-- </span>
<span class="c1">-- cmap - Character To Glyph Index Mapping Table This table defines the mapping of character codes to the glyph index values used in the font.</span>
<span class="n">Ttf</span><span class="p">.</span><span class="n">Cmap</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Cmap</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Cmap</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">version_number</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">number_of_encoding_tables</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">tables</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">number_of_encoding_tables</span> <span class="o">-</span> <span class="mi">1</span> <span class="kr">do</span>
    <span class="n">self</span><span class="p">.</span><span class="n">tables</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Cmap</span><span class="p">.</span><span class="n">SubtableHeader</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="kr">end</span>
<span class="kr">end</span>


<span class="n">Ttf</span><span class="p">.</span><span class="n">Cmap</span><span class="p">.</span><span class="n">SubtableHeader</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Cmap</span><span class="p">.</span><span class="nc">SubtableHeader</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Cmap</span><span class="p">.</span><span class="nc">SubtableHeader</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">platform_id</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">encoding_id</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">subtable_offset</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u4be</span><span class="p">()</span>
<span class="kr">end</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">Cmap</span><span class="p">.</span><span class="n">SubtableHeader</span><span class="p">.</span><span class="n">property</span><span class="p">.</span><span class="n">table</span> <span class="o">=</span> <span class="p">{}</span>
<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Cmap</span><span class="p">.</span><span class="nc">SubtableHeader</span><span class="p">.</span><span class="nc">property</span><span class="p">.</span><span class="nc">table</span><span class="p">:</span><span class="nf">get</span><span class="p">()</span>
  <span class="kr">if</span> <span class="n">self</span><span class="p">.</span><span class="n">_m_table</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="kr">then</span>
    <span class="kr">return</span> <span class="n">self</span><span class="p">.</span><span class="n">_m_table</span>
  <span class="kr">end</span>

  <span class="kd">local</span> <span class="n">_io</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_parent</span><span class="p">.</span><span class="n">_io</span>
  <span class="kd">local</span> <span class="n">_pos</span> <span class="o">=</span> <span class="n">_io</span><span class="p">:</span><span class="n">pos</span><span class="p">()</span>
  <span class="n">_io</span><span class="p">:</span><span class="n">seek</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">subtable_offset</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_m_table</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Cmap</span><span class="p">.</span><span class="n">Subtable</span><span class="p">(</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="n">_io</span><span class="p">:</span><span class="n">seek</span><span class="p">(</span><span class="n">_pos</span><span class="p">)</span>
  <span class="kr">return</span> <span class="n">self</span><span class="p">.</span><span class="n">_m_table</span>
<span class="kr">end</span>


<span class="n">Ttf</span><span class="p">.</span><span class="n">Cmap</span><span class="p">.</span><span class="n">Subtable</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">Cmap</span><span class="p">.</span><span class="n">Subtable</span><span class="p">.</span><span class="n">SubtableFormat</span> <span class="o">=</span> <span class="n">enum</span><span class="p">.</span><span class="n">Enum</span> <span class="p">{</span>
  <span class="n">byte_encoding_table</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="n">high_byte_mapping_through_table</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
  <span class="n">segment_mapping_to_delta_values</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
  <span class="n">trimmed_table_mapping</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
<span class="p">}</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Cmap</span><span class="p">.</span><span class="nc">Subtable</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Cmap</span><span class="p">.</span><span class="nc">Subtable</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">format</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Cmap</span><span class="p">.</span><span class="n">Subtable</span><span class="p">.</span><span class="n">SubtableFormat</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">())</span>
  <span class="n">self</span><span class="p">.</span><span class="n">length</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">version</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="kd">local</span> <span class="n">_on</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">format</span>
  <span class="kr">if</span> <span class="n">_on</span> <span class="o">==</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Cmap</span><span class="p">.</span><span class="n">Subtable</span><span class="p">.</span><span class="n">SubtableFormat</span><span class="p">.</span><span class="n">byte_encoding_table</span> <span class="kr">then</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_raw_value</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bytes</span><span class="p">((</span><span class="n">self</span><span class="p">.</span><span class="n">length</span> <span class="o">-</span> <span class="mi">6</span><span class="p">))</span>
    <span class="kd">local</span> <span class="n">_io</span> <span class="o">=</span> <span class="n">KaitaiStream</span><span class="p">(</span><span class="n">stringstream</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_raw_value</span><span class="p">))</span>
    <span class="n">self</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Cmap</span><span class="p">.</span><span class="n">Subtable</span><span class="p">.</span><span class="n">ByteEncodingTable</span><span class="p">(</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="kr">elseif</span> <span class="n">_on</span> <span class="o">==</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Cmap</span><span class="p">.</span><span class="n">Subtable</span><span class="p">.</span><span class="n">SubtableFormat</span><span class="p">.</span><span class="n">segment_mapping_to_delta_values</span> <span class="kr">then</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_raw_value</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bytes</span><span class="p">((</span><span class="n">self</span><span class="p">.</span><span class="n">length</span> <span class="o">-</span> <span class="mi">6</span><span class="p">))</span>
    <span class="kd">local</span> <span class="n">_io</span> <span class="o">=</span> <span class="n">KaitaiStream</span><span class="p">(</span><span class="n">stringstream</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_raw_value</span><span class="p">))</span>
    <span class="n">self</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Cmap</span><span class="p">.</span><span class="n">Subtable</span><span class="p">.</span><span class="n">SegmentMappingToDeltaValues</span><span class="p">(</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="kr">elseif</span> <span class="n">_on</span> <span class="o">==</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Cmap</span><span class="p">.</span><span class="n">Subtable</span><span class="p">.</span><span class="n">SubtableFormat</span><span class="p">.</span><span class="n">high_byte_mapping_through_table</span> <span class="kr">then</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_raw_value</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bytes</span><span class="p">((</span><span class="n">self</span><span class="p">.</span><span class="n">length</span> <span class="o">-</span> <span class="mi">6</span><span class="p">))</span>
    <span class="kd">local</span> <span class="n">_io</span> <span class="o">=</span> <span class="n">KaitaiStream</span><span class="p">(</span><span class="n">stringstream</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_raw_value</span><span class="p">))</span>
    <span class="n">self</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Cmap</span><span class="p">.</span><span class="n">Subtable</span><span class="p">.</span><span class="n">HighByteMappingThroughTable</span><span class="p">(</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="kr">elseif</span> <span class="n">_on</span> <span class="o">==</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Cmap</span><span class="p">.</span><span class="n">Subtable</span><span class="p">.</span><span class="n">SubtableFormat</span><span class="p">.</span><span class="n">trimmed_table_mapping</span> <span class="kr">then</span>
    <span class="n">self</span><span class="p">.</span><span class="n">_raw_value</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bytes</span><span class="p">((</span><span class="n">self</span><span class="p">.</span><span class="n">length</span> <span class="o">-</span> <span class="mi">6</span><span class="p">))</span>
    <span class="kd">local</span> <span class="n">_io</span> <span class="o">=</span> <span class="n">KaitaiStream</span><span class="p">(</span><span class="n">stringstream</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_raw_value</span><span class="p">))</span>
    <span class="n">self</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">Ttf</span><span class="p">.</span><span class="n">Cmap</span><span class="p">.</span><span class="n">Subtable</span><span class="p">.</span><span class="n">TrimmedTableMapping</span><span class="p">(</span><span class="n">_io</span><span class="p">,</span> <span class="n">self</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">_root</span><span class="p">)</span>
  <span class="kr">else</span>
    <span class="n">self</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bytes</span><span class="p">((</span><span class="n">self</span><span class="p">.</span><span class="n">length</span> <span class="o">-</span> <span class="mi">6</span><span class="p">))</span>
  <span class="kr">end</span>
<span class="kr">end</span>


<span class="n">Ttf</span><span class="p">.</span><span class="n">Cmap</span><span class="p">.</span><span class="n">Subtable</span><span class="p">.</span><span class="n">ByteEncodingTable</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Cmap</span><span class="p">.</span><span class="nc">Subtable</span><span class="p">.</span><span class="nc">ByteEncodingTable</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Cmap</span><span class="p">.</span><span class="nc">Subtable</span><span class="p">.</span><span class="nc">ByteEncodingTable</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">glyph_id_array</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_bytes</span><span class="p">(</span><span class="mi">256</span><span class="p">)</span>
<span class="kr">end</span>


<span class="n">Ttf</span><span class="p">.</span><span class="n">Cmap</span><span class="p">.</span><span class="n">Subtable</span><span class="p">.</span><span class="n">HighByteMappingThroughTable</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Cmap</span><span class="p">.</span><span class="nc">Subtable</span><span class="p">.</span><span class="nc">HighByteMappingThroughTable</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Cmap</span><span class="p">.</span><span class="nc">Subtable</span><span class="p">.</span><span class="nc">HighByteMappingThroughTable</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">sub_header_keys</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">256</span> <span class="o">-</span> <span class="mi">1</span> <span class="kr">do</span>
    <span class="n">self</span><span class="p">.</span><span class="n">sub_header_keys</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="kr">end</span>
<span class="kr">end</span>


<span class="n">Ttf</span><span class="p">.</span><span class="n">Cmap</span><span class="p">.</span><span class="n">Subtable</span><span class="p">.</span><span class="n">SegmentMappingToDeltaValues</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Cmap</span><span class="p">.</span><span class="nc">Subtable</span><span class="p">.</span><span class="nc">SegmentMappingToDeltaValues</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Cmap</span><span class="p">.</span><span class="nc">Subtable</span><span class="p">.</span><span class="nc">SegmentMappingToDeltaValues</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">seg_count_x2</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">search_range</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">entry_selector</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">range_shift</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">end_count</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">seg_count</span> <span class="o">-</span> <span class="mi">1</span> <span class="kr">do</span>
    <span class="n">self</span><span class="p">.</span><span class="n">end_count</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="kr">end</span>
  <span class="n">self</span><span class="p">.</span><span class="n">reserved_pad</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">start_count</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">seg_count</span> <span class="o">-</span> <span class="mi">1</span> <span class="kr">do</span>
    <span class="n">self</span><span class="p">.</span><span class="n">start_count</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="kr">end</span>
  <span class="n">self</span><span class="p">.</span><span class="n">id_delta</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">seg_count</span> <span class="o">-</span> <span class="mi">1</span> <span class="kr">do</span>
    <span class="n">self</span><span class="p">.</span><span class="n">id_delta</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="kr">end</span>
  <span class="n">self</span><span class="p">.</span><span class="n">id_range_offset</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">seg_count</span> <span class="o">-</span> <span class="mi">1</span> <span class="kr">do</span>
    <span class="n">self</span><span class="p">.</span><span class="n">id_range_offset</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="kr">end</span>
  <span class="n">self</span><span class="p">.</span><span class="n">glyph_id_array</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="kd">local</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="kr">while</span> <span class="ow">not</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">is_eof</span><span class="p">()</span> <span class="kr">do</span>
    <span class="n">self</span><span class="p">.</span><span class="n">glyph_id_array</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
  <span class="kr">end</span>
<span class="kr">end</span>

<span class="n">Ttf</span><span class="p">.</span><span class="n">Cmap</span><span class="p">.</span><span class="n">Subtable</span><span class="p">.</span><span class="n">SegmentMappingToDeltaValues</span><span class="p">.</span><span class="n">property</span><span class="p">.</span><span class="n">seg_count</span> <span class="o">=</span> <span class="p">{}</span>
<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Cmap</span><span class="p">.</span><span class="nc">Subtable</span><span class="p">.</span><span class="nc">SegmentMappingToDeltaValues</span><span class="p">.</span><span class="nc">property</span><span class="p">.</span><span class="nc">seg_count</span><span class="p">:</span><span class="nf">get</span><span class="p">()</span>
  <span class="kr">if</span> <span class="n">self</span><span class="p">.</span><span class="n">_m_seg_count</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="kr">then</span>
    <span class="kr">return</span> <span class="n">self</span><span class="p">.</span><span class="n">_m_seg_count</span>
  <span class="kr">end</span>

  <span class="n">self</span><span class="p">.</span><span class="n">_m_seg_count</span> <span class="o">=</span> <span class="nb">math.floor</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">seg_count_x2</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
  <span class="kr">return</span> <span class="n">self</span><span class="p">.</span><span class="n">_m_seg_count</span>
<span class="kr">end</span>


<span class="n">Ttf</span><span class="p">.</span><span class="n">Cmap</span><span class="p">.</span><span class="n">Subtable</span><span class="p">.</span><span class="n">TrimmedTableMapping</span> <span class="o">=</span> <span class="n">class</span><span class="p">.</span><span class="n">class</span><span class="p">(</span><span class="n">KaitaiStruct</span><span class="p">)</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Cmap</span><span class="p">.</span><span class="nc">Subtable</span><span class="p">.</span><span class="nc">TrimmedTableMapping</span><span class="p">:</span><span class="nf">_init</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
  <span class="n">KaitaiStruct</span><span class="p">.</span><span class="n">_init</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">io</span><span class="p">)</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
  <span class="n">self</span><span class="p">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">root</span> <span class="ow">or</span> <span class="n">self</span>
  <span class="n">self</span><span class="p">:</span><span class="n">_read</span><span class="p">()</span>
<span class="kr">end</span>

<span class="kr">function</span> <span class="nc">Ttf</span><span class="p">.</span><span class="nc">Cmap</span><span class="p">.</span><span class="nc">Subtable</span><span class="p">.</span><span class="nc">TrimmedTableMapping</span><span class="p">:</span><span class="nf">_read</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">first_code</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">entry_count</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="n">self</span><span class="p">.</span><span class="n">glyph_id_array</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="kr">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">entry_count</span> <span class="o">-</span> <span class="mi">1</span> <span class="kr">do</span>
    <span class="n">self</span><span class="p">.</span><span class="n">glyph_id_array</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">_io</span><span class="p">:</span><span class="n">read_u2be</span><span class="p">()</span>
  <span class="kr">end</span>
<span class="kr">end</span>
</pre></div>

        </div>
        
    </div>
</section>

    <footer id="main-footer">
        <div class="container">
            &copy; 2015&ndash;2023 Kaitai Project and <a href="https://github.com/kaitai-io/kaitai_struct_formats/graphs/contributors">format repo contributors</a>

            <h3>Contacts</h3>

            <div class="row">
                <div class="col-sm-4">
                    <i class="fa fa-fw fa-2x fa-github"></i> <a href="https://github.com/kaitai-io/kaitai_struct">GitHub</a>
                </div>
                <div class="col-sm-4">
                    <i class="fa fa-fw fa-2x fa-twitter"></i> <a href="https://twitter.com/kaitai_io">@kaitai_io</a>
                </div>
                <div class="col-sm-4">
                    Gitter: <a href="https://gitter.im/kaitai_struct/Lobby">kaitai_struct</a>
                </div>
            </div>
        </div>
    </footer>

  <script src="//kaitai.io/js/jquery-1.12.3.min.js"></script>
  <script src="//kaitai.io/js/bootstrap.min.js"></script>

  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-76299550-1', 'auto');
      ga('send', 'pageview');
  </script>
</body>
</html>
