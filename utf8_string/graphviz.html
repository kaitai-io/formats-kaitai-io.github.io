<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>UTF8-encoded string: GraphViz block diagram (.dot) source: Kaitai Struct</title>
  <meta name="keywords" content="kaitai,struct,binary,format,parsing,decoding,java,javascript,python,ruby,library,metadata">
  <meta name="description" content="Kaitai Struct is a formal language for binary format specification that can be compiled into parser code">

  <link rel="stylesheet" href="//kaitai.io/styles/bootstrap.min.css">
  <link rel="stylesheet" href="//kaitai.io/styles/bootstrap-theme.min.css">
  <link href='https://fonts.googleapis.com/css?family=Exo:400,700' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Share+Tech+Mono' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  <link rel="stylesheet" href="//kaitai.io/styles/main.css" type="text/css">

  <link rel="stylesheet" href="//kaitai.io/styles/highlight/default.css">
  <style>
.diagram-img {
    display: block;
    max-width: 100%;
    height: auto;
    margin: 0 auto;
}

section.format {
    padding: 30px 0;
}

section#format-meta, section#format-index-header {
    background: #e3eef7;
}

section#format-diagram, section#format-index-footer {
    background: #e9f8dd;
}

section#format-ksy, section#format-lang {
    background: #d1eadd;
}

section#format-index .row {
    padding-bottom: 10px;
}

  </style>
  <script src="//kaitai.io/js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
</head>
<body data-spy="scroll" data-target="#main-navbar" data-offset="100">

    <nav class="navbar navbar-inverse navbar-fixed-top" id="main-navbar">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-navbar-collapse" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <span class="navbar-brand">Kaitai Struct</span>
            </div>
            <div class="collapse navbar-collapse" id="main-navbar-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="http://kaitai.io/#what-is-it">What is it?</a></li>
                    <li><a href="http://kaitai.io/#quick-start">Quick Start</a></li>
                    <li><a href="http://kaitai.io/#download">Download</a></li>
                    <li class="active"><a href="http://formats.kaitai.io/">Format Gallery</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="http://kaitai.io/repl/index.html">Try it</a></li>
                    <li><a href="https://ide.kaitai.io/">Web IDE</a></li>
                    <li><a href="http://doc.kaitai.io/">Documentation</a></li>
                </ul>
            </div>
        </div>
    </nav>
<nav>
    <div class="container">
    <ol class="breadcrumb">
        <li><a href="../index.html">Format Gallery</a></li>
        <li>Commonly Used Data Types</li>
        <li class="active">UTF8-encoded string</li>
    </ol>
    </div>
</nav>

<section id="format-meta" class="format">
    <div class="container">
        <h1>UTF8-encoded string:
            
            GraphViz block diagram (.dot) source
            
        </h1>

        <div class="row">
            <div class="col-md-8">
                <p><p>UTF-8 is a popular character encoding schemes that allows to represent
code points defined in Unicode standard. Its features are:</p>
<ul>
<li>variable width (i.e. one code point might be represented by 1 to 4
bytes)</li>
<li>backward compatiblity with ASCII</li>
<li>basic validity checking (and thus distinguishing from other legacy
8-bit encodings)</li>
<li>maintaining sort order of codepoints if sorted as a byte array</li>
</ul>
<p>WARNING: For vast majority of practical purposes of format definitions
in Kaitai Struct, you'd likely note want to use this and rather just
use <code>type: str</code> with <code>encoding: utf8</code>. That will use native string
implementations, which are most likely more efficient and will give you
native language strings, rather than an array of individual codepoints.
This format definition is provided mostly for educational / research
purposes.</p>
</p>
            </div>
            <div class="col-md-4">
                <div class="panel panel-info">
                    
                    
                    
                    <div class="panel-heading">
                        <h3 class="panel-title">KS implementation details</h3>
                    </div>
                    
                    <div class="panel-body">
                        License: <a href="https://spdx.org/licenses/CC0-1.0.html">CC0-1.0</a>
                    </div>
                    
                    
                    
                    
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
            <p>
            This page hosts a formal specification of UTF8-encoded string
            using <a href="http://kaitai.io">Kaitai Struct</a>. This
            specification can be automatically translated into a
            variety of programming languages to get a parsing library.
            </p>

            <ul class="nav nav-pills">
                
                
                <li>
                
                <a href="index.html" title="UTF8-encoded string parsing Overview library">Overview</a></li>
                
                
                <li>
                
                <a href="cpp_stl.html" title="UTF8-encoded string parsing C++/STL library">C++/STL</a></li>
                
                
                <li>
                
                <a href="csharp.html" title="UTF8-encoded string parsing C# library">C#</a></li>
                
                
                <li class="active">
                
                <a href="graphviz.html" title="UTF8-encoded string parsing GraphViz library">GraphViz</a></li>
                
                
                <li>
                
                <a href="java.html" title="UTF8-encoded string parsing Java library">Java</a></li>
                
                
                <li>
                
                <a href="javascript.html" title="UTF8-encoded string parsing JavaScript library">JavaScript</a></li>
                
                
                <li>
                
                <a href="lua.html" title="UTF8-encoded string parsing Lua library">Lua</a></li>
                
                
                <li>
                
                <a href="perl.html" title="UTF8-encoded string parsing Perl library">Perl</a></li>
                
                
                <li>
                
                <a href="php.html" title="UTF8-encoded string parsing PHP library">PHP</a></li>
                
                
                <li>
                
                <a href="python.html" title="UTF8-encoded string parsing Python library">Python</a></li>
                
                
                <li>
                
                <a href="ruby.html" title="UTF8-encoded string parsing Ruby library">Ruby</a></li>
                
            </ul>
            </div>
        </div>
    </div>
</section>


<section id="format-lang" class="format">
    <div class="container">
        <h2>
            
            GraphViz block diagram source
            
        </h2>

        

        <h3>utf8_string.dot</h3>

        <div class="row">
            <div class="pull-right">
                <p>
                    <a href="src/graphviz/utf8_string.dot" class="btn btn-success">Download <i class="fa fa-download"></i></a>
                </p>
            </div>
        </div>

        <div class="row">
            <pre><code class="graphviz">digraph {
	rankdir=LR;
	node [shape=plaintext];
	subgraph cluster__utf8_string {
		label=&quot;Utf8String&quot;;
		graph[style=dotted];

		utf8_string__seq [label=&lt;&lt;TABLE BORDER=&quot;0&quot; CELLBORDER=&quot;1&quot; CELLSPACING=&quot;0&quot;&gt;
			&lt;TR&gt;&lt;TD BGCOLOR=&quot;#E0FFE0&quot;&gt;pos&lt;/TD&gt;&lt;TD BGCOLOR=&quot;#E0FFE0&quot;&gt;size&lt;/TD&gt;&lt;TD BGCOLOR=&quot;#E0FFE0&quot;&gt;type&lt;/TD&gt;&lt;TD BGCOLOR=&quot;#E0FFE0&quot;&gt;id&lt;/TD&gt;&lt;/TR&gt;
			&lt;TR&gt;&lt;TD PORT=&quot;codepoints_pos&quot;&gt;0&lt;/TD&gt;&lt;TD PORT=&quot;codepoints_size&quot;&gt;4&lt;/TD&gt;&lt;TD&gt;Utf8Codepoint&lt;/TD&gt;&lt;TD PORT=&quot;codepoints_type&quot;&gt;codepoints&lt;/TD&gt;&lt;/TR&gt;
			&lt;TR&gt;&lt;TD COLSPAN=&quot;4&quot; PORT=&quot;codepoints__repeat&quot;&gt;repeat to end of stream&lt;/TD&gt;&lt;/TR&gt;
		&lt;/TABLE&gt;&gt;];
		subgraph cluster__utf8_codepoint {
			label=&quot;Utf8String::Utf8Codepoint&quot;;
			graph[style=dotted];

			utf8_codepoint__seq [label=&lt;&lt;TABLE BORDER=&quot;0&quot; CELLBORDER=&quot;1&quot; CELLSPACING=&quot;0&quot;&gt;
				&lt;TR&gt;&lt;TD BGCOLOR=&quot;#E0FFE0&quot;&gt;pos&lt;/TD&gt;&lt;TD BGCOLOR=&quot;#E0FFE0&quot;&gt;size&lt;/TD&gt;&lt;TD BGCOLOR=&quot;#E0FFE0&quot;&gt;type&lt;/TD&gt;&lt;TD BGCOLOR=&quot;#E0FFE0&quot;&gt;id&lt;/TD&gt;&lt;/TR&gt;
				&lt;TR&gt;&lt;TD PORT=&quot;byte1_pos&quot;&gt;0&lt;/TD&gt;&lt;TD PORT=&quot;byte1_size&quot;&gt;1&lt;/TD&gt;&lt;TD&gt;u1&lt;/TD&gt;&lt;TD PORT=&quot;byte1_type&quot;&gt;byte1&lt;/TD&gt;&lt;/TR&gt;
				&lt;TR&gt;&lt;TD PORT=&quot;byte2_pos&quot;&gt;1&lt;/TD&gt;&lt;TD PORT=&quot;byte2_size&quot;&gt;1&lt;/TD&gt;&lt;TD&gt;u1&lt;/TD&gt;&lt;TD PORT=&quot;byte2_type&quot;&gt;byte2&lt;/TD&gt;&lt;/TR&gt;
				&lt;TR&gt;&lt;TD PORT=&quot;byte3_pos&quot;&gt;2&lt;/TD&gt;&lt;TD PORT=&quot;byte3_size&quot;&gt;1&lt;/TD&gt;&lt;TD&gt;u1&lt;/TD&gt;&lt;TD PORT=&quot;byte3_type&quot;&gt;byte3&lt;/TD&gt;&lt;/TR&gt;
				&lt;TR&gt;&lt;TD PORT=&quot;byte4_pos&quot;&gt;3&lt;/TD&gt;&lt;TD PORT=&quot;byte4_size&quot;&gt;1&lt;/TD&gt;&lt;TD&gt;u1&lt;/TD&gt;&lt;TD PORT=&quot;byte4_type&quot;&gt;byte4&lt;/TD&gt;&lt;/TR&gt;
			&lt;/TABLE&gt;&gt;];
			utf8_codepoint__inst__raw1 [label=&lt;&lt;TABLE BORDER=&quot;0&quot; CELLBORDER=&quot;1&quot; CELLSPACING=&quot;0&quot;&gt;
				&lt;TR&gt;&lt;TD BGCOLOR=&quot;#E0FFE0&quot;&gt;id&lt;/TD&gt;&lt;TD BGCOLOR=&quot;#E0FFE0&quot;&gt;value&lt;/TD&gt;&lt;/TR&gt;
				&lt;TR&gt;&lt;TD&gt;raw1&lt;/TD&gt;&lt;TD&gt;(byte1 &amp;amp; (len == 1 ? 127 : (len == 2 ? 31 : (len == 3 ? 15 : (len == 4 ? 7 : 0)))))&lt;/TD&gt;&lt;/TR&gt;
			&lt;/TABLE&gt;&gt;];
			utf8_codepoint__inst__raw4 [label=&lt;&lt;TABLE BORDER=&quot;0&quot; CELLBORDER=&quot;1&quot; CELLSPACING=&quot;0&quot;&gt;
				&lt;TR&gt;&lt;TD BGCOLOR=&quot;#E0FFE0&quot;&gt;id&lt;/TD&gt;&lt;TD BGCOLOR=&quot;#E0FFE0&quot;&gt;value&lt;/TD&gt;&lt;/TR&gt;
				&lt;TR&gt;&lt;TD&gt;raw4&lt;/TD&gt;&lt;TD&gt;(byte4 &amp;amp; 63)&lt;/TD&gt;&lt;/TR&gt;
			&lt;/TABLE&gt;&gt;];
			utf8_codepoint__inst__raw3 [label=&lt;&lt;TABLE BORDER=&quot;0&quot; CELLBORDER=&quot;1&quot; CELLSPACING=&quot;0&quot;&gt;
				&lt;TR&gt;&lt;TD BGCOLOR=&quot;#E0FFE0&quot;&gt;id&lt;/TD&gt;&lt;TD BGCOLOR=&quot;#E0FFE0&quot;&gt;value&lt;/TD&gt;&lt;/TR&gt;
				&lt;TR&gt;&lt;TD&gt;raw3&lt;/TD&gt;&lt;TD&gt;(byte3 &amp;amp; 63)&lt;/TD&gt;&lt;/TR&gt;
			&lt;/TABLE&gt;&gt;];
			utf8_codepoint__inst__value_as_int [label=&lt;&lt;TABLE BORDER=&quot;0&quot; CELLBORDER=&quot;1&quot; CELLSPACING=&quot;0&quot;&gt;
				&lt;TR&gt;&lt;TD BGCOLOR=&quot;#E0FFE0&quot;&gt;id&lt;/TD&gt;&lt;TD BGCOLOR=&quot;#E0FFE0&quot;&gt;value&lt;/TD&gt;&lt;/TR&gt;
				&lt;TR&gt;&lt;TD&gt;value_as_int&lt;/TD&gt;&lt;TD&gt;(len == 1 ? raw1 : (len == 2 ? ((raw1 &amp;lt;&amp;lt; 6) | raw2) : (len == 3 ? (((raw1 &amp;lt;&amp;lt; 12) | (raw2 &amp;lt;&amp;lt; 6)) | raw3) : (len == 4 ? ((((raw1 &amp;lt;&amp;lt; 18) | (raw2 &amp;lt;&amp;lt; 12)) | (raw3 &amp;lt;&amp;lt; 6)) | raw4) : -1))))&lt;/TD&gt;&lt;/TR&gt;
			&lt;/TABLE&gt;&gt;];
			utf8_codepoint__inst__raw2 [label=&lt;&lt;TABLE BORDER=&quot;0&quot; CELLBORDER=&quot;1&quot; CELLSPACING=&quot;0&quot;&gt;
				&lt;TR&gt;&lt;TD BGCOLOR=&quot;#E0FFE0&quot;&gt;id&lt;/TD&gt;&lt;TD BGCOLOR=&quot;#E0FFE0&quot;&gt;value&lt;/TD&gt;&lt;/TR&gt;
				&lt;TR&gt;&lt;TD&gt;raw2&lt;/TD&gt;&lt;TD&gt;(byte2 &amp;amp; 63)&lt;/TD&gt;&lt;/TR&gt;
			&lt;/TABLE&gt;&gt;];
			utf8_codepoint__inst__len [label=&lt;&lt;TABLE BORDER=&quot;0&quot; CELLBORDER=&quot;1&quot; CELLSPACING=&quot;0&quot;&gt;
				&lt;TR&gt;&lt;TD BGCOLOR=&quot;#E0FFE0&quot;&gt;id&lt;/TD&gt;&lt;TD BGCOLOR=&quot;#E0FFE0&quot;&gt;value&lt;/TD&gt;&lt;/TR&gt;
				&lt;TR&gt;&lt;TD&gt;len&lt;/TD&gt;&lt;TD&gt;((byte1 &amp;amp; 128) == 0 ? 1 : ((byte1 &amp;amp; 224) == 192 ? 2 : ((byte1 &amp;amp; 240) == 224 ? 3 : ((byte1 &amp;amp; 248) == 240 ? 4 : -1))))&lt;/TD&gt;&lt;/TR&gt;
			&lt;/TABLE&gt;&gt;];
		}
	}
	utf8_string__seq:codepoints_type -&gt; utf8_codepoint__seq [style=bold];
	utf8_codepoint__seq:byte1_type -&gt; utf8_codepoint__inst__raw1 [color=&quot;#404040&quot;];
	utf8_codepoint__inst__len:len_type -&gt; utf8_codepoint__inst__raw1 [color=&quot;#404040&quot;];
	utf8_codepoint__inst__len:len_type -&gt; utf8_codepoint__inst__raw1 [color=&quot;#404040&quot;];
	utf8_codepoint__inst__len:len_type -&gt; utf8_codepoint__inst__raw1 [color=&quot;#404040&quot;];
	utf8_codepoint__inst__len:len_type -&gt; utf8_codepoint__inst__raw1 [color=&quot;#404040&quot;];
	utf8_codepoint__seq:byte4_type -&gt; utf8_codepoint__inst__raw4 [color=&quot;#404040&quot;];
	utf8_codepoint__seq:byte3_type -&gt; utf8_codepoint__inst__raw3 [color=&quot;#404040&quot;];
	utf8_codepoint__inst__len:len_type -&gt; utf8_codepoint__inst__value_as_int [color=&quot;#404040&quot;];
	utf8_codepoint__inst__raw1:raw1_type -&gt; utf8_codepoint__inst__value_as_int [color=&quot;#404040&quot;];
	utf8_codepoint__inst__len:len_type -&gt; utf8_codepoint__inst__value_as_int [color=&quot;#404040&quot;];
	utf8_codepoint__inst__raw1:raw1_type -&gt; utf8_codepoint__inst__value_as_int [color=&quot;#404040&quot;];
	utf8_codepoint__inst__raw2:raw2_type -&gt; utf8_codepoint__inst__value_as_int [color=&quot;#404040&quot;];
	utf8_codepoint__inst__len:len_type -&gt; utf8_codepoint__inst__value_as_int [color=&quot;#404040&quot;];
	utf8_codepoint__inst__raw1:raw1_type -&gt; utf8_codepoint__inst__value_as_int [color=&quot;#404040&quot;];
	utf8_codepoint__inst__raw2:raw2_type -&gt; utf8_codepoint__inst__value_as_int [color=&quot;#404040&quot;];
	utf8_codepoint__inst__raw3:raw3_type -&gt; utf8_codepoint__inst__value_as_int [color=&quot;#404040&quot;];
	utf8_codepoint__inst__len:len_type -&gt; utf8_codepoint__inst__value_as_int [color=&quot;#404040&quot;];
	utf8_codepoint__inst__raw1:raw1_type -&gt; utf8_codepoint__inst__value_as_int [color=&quot;#404040&quot;];
	utf8_codepoint__inst__raw2:raw2_type -&gt; utf8_codepoint__inst__value_as_int [color=&quot;#404040&quot;];
	utf8_codepoint__inst__raw3:raw3_type -&gt; utf8_codepoint__inst__value_as_int [color=&quot;#404040&quot;];
	utf8_codepoint__inst__raw4:raw4_type -&gt; utf8_codepoint__inst__value_as_int [color=&quot;#404040&quot;];
	utf8_codepoint__seq:byte2_type -&gt; utf8_codepoint__inst__raw2 [color=&quot;#404040&quot;];
	utf8_codepoint__seq:byte1_type -&gt; utf8_codepoint__inst__len [color=&quot;#404040&quot;];
	utf8_codepoint__seq:byte1_type -&gt; utf8_codepoint__inst__len [color=&quot;#404040&quot;];
	utf8_codepoint__seq:byte1_type -&gt; utf8_codepoint__inst__len [color=&quot;#404040&quot;];
	utf8_codepoint__seq:byte1_type -&gt; utf8_codepoint__inst__len [color=&quot;#404040&quot;];
}
</code></pre>
            
        </div>
        
    </div>
</section>

    <footer id="main-footer">
        <div class="container">
            &copy; 2015-2019 Kaitai Project and <a href="https://github.com/kaitai-io/kaitai_struct_formats/graphs/contributors">formats repo contributors</a>

            <h3>Contacts</h3>

            <div class="row">
                <div class="col-sm-4">
                    <i class="fa fa-fw fa-2x fa-github"></i> <a href="https://github.com/kaitai-io/kaitai_struct">GitHub</a>
                </div>
                <div class="col-sm-4">
                    <i class="fa fa-fw fa-2x fa-twitter"></i> <a href="https://twitter.com/kaitai_io">@kaitai_io</a>
                </div>
                <div class="col-sm-4">
                    Gitter: <a href="https://gitter.im/kaitai_struct/Lobby">kaitai_struct</a>
                </div>
            </div>
        </div>
    </footer>

  <script src="//kaitai.io/js/jquery-1.12.3.min.js"></script>
  <script src="//kaitai.io/js/bootstrap.min.js"></script>

  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-76299550-1', 'auto');
      ga('send', 'pageview');
  </script>
</body>
</html>
