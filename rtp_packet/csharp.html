<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>RTP (Real-time Transport Protocol): C# parsing library</title>
  <meta name="keywords" content="kaitai,struct,binary,format,parsing,decoding,java,javascript,python,ruby,library,metadata">
  <meta name="description" content="Kaitai Struct is a formal language for binary format specification that can be compiled into parser code">

  <link rel="stylesheet" href="//kaitai.io/styles/bootstrap.min.css">
  <link rel="stylesheet" href="//kaitai.io/styles/bootstrap-theme.min.css">
  <link href='https://fonts.googleapis.com/css?family=Exo:400,700' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Share+Tech+Mono' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  <link rel="stylesheet" href="//kaitai.io/styles/main.css" type="text/css">

  <link rel="stylesheet" href="//kaitai.io/styles/highlight/default.css">
  <style>
.diagram-img {
    display: block;
    max-width: 100%;
    height: auto;
    margin: 0 auto;
}

section.format {
    padding: 30px 0;
}

section#format-meta, section#format-index-header {
    background: #e3eef7;
}

section#format-diagram, section#format-index-footer {
    background: #e9f8dd;
}

section#format-ksy, section#format-lang {
    background: #d1eadd;
}

section#format-index .row {
    padding-bottom: 10px;
}

  </style>
  <script src="//kaitai.io/js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
</head>
<body data-spy="scroll" data-target="#main-navbar" data-offset="100">

    <nav class="navbar navbar-inverse navbar-fixed-top" id="main-navbar">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-navbar-collapse" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <span class="navbar-brand">Kaitai Struct</span>
            </div>
            <div class="collapse navbar-collapse" id="main-navbar-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="http://kaitai.io/#what-is-it">What is it?</a></li>
                    <li><a href="http://kaitai.io/#quick-start">Quick Start</a></li>
                    <li><a href="http://kaitai.io/#download">Download</a></li>
                    <li class="active"><a href="http://formats.kaitai.io/">Format Gallery</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="http://kaitai.io/repl/index.html">Try it</a></li>
                    <li><a href="https://ide.kaitai.io/">Web IDE</a></li>
                    <li><a href="http://doc.kaitai.io/">Documentation</a></li>
                </ul>
            </div>
        </div>
    </nav>
<nav>
    <div class="container">
    <ol class="breadcrumb">
        <li><a href="../index.html">Format Gallery</a></li>
        <li>Networking Protocols</li>
        <li class="active">RTP (Real-time Transport Protocol)</li>
    </ol>
    </div>
</nav>

<section id="format-meta" class="format">
    <div class="container">
        <h1>RTP (Real-time Transport Protocol):
            
            C# parsing library
            
        </h1>

        <div class="row">
            <div class="col-md-8">
                <p><p>The Real-time Transport Protocol (RTP) is a widely used network
protocol for transmitting audio or video. It usually works with the
RTP Control Protocol (RTCP). The transmission can be based on
Transmission Control Protocol (TCP) or User Datagram Protocol (UDP).</p>
</p>
            </div>
            <div class="col-md-4">
                <div class="panel panel-info">
                    
                    
                    
                    <div class="panel-heading">
                        <h3 class="panel-title">KS implementation details</h3>
                    </div>
                    
                    <div class="panel-body">
                        License: <a href="https://spdx.org/licenses/Unlicense.html">Unlicense</a>
                    </div>
                    
                    
                    
                    
                    
                    <div class="panel-heading">
                        <h3 class="panel-title">References</h3>
                    </div>
                    <div class="panel-body">
                        <ul>
                            
                            
                            
                            <li><a href="https://tools.ietf.org/html/rfc3550">RFC 3550</a></li>
                            
                            
                            
                            
                            
                            <li><a href="https://www.wikidata.org/wiki/Q321213">Wikidata Q321213</a></li>
                            
                            
                            
                            
                            
                        </ul>
                    </div>
                    
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
            <p>
            This page hosts a formal specification of RTP (Real-time Transport Protocol)
            using <a href="http://kaitai.io">Kaitai Struct</a>. This
            specification can be automatically translated into a
            variety of programming languages to get a parsing library.
            </p>

            <ul class="nav nav-pills">
                
                
                <li>
                
                <a href="index.html" title="RTP (Real-time Transport Protocol) parsing Overview library">Overview</a></li>
                
                
                <li class="active">
                
                <a href="csharp.html" title="RTP (Real-time Transport Protocol) parsing C# library">C#</a></li>
                
                
                <li>
                
                <a href="graphviz.html" title="RTP (Real-time Transport Protocol) parsing GraphViz library">GraphViz</a></li>
                
                
                <li>
                
                <a href="java.html" title="RTP (Real-time Transport Protocol) parsing Java library">Java</a></li>
                
                
                <li>
                
                <a href="javascript.html" title="RTP (Real-time Transport Protocol) parsing JavaScript library">JavaScript</a></li>
                
                
                <li>
                
                <a href="lua.html" title="RTP (Real-time Transport Protocol) parsing Lua library">Lua</a></li>
                
                
                <li>
                
                <a href="perl.html" title="RTP (Real-time Transport Protocol) parsing Perl library">Perl</a></li>
                
                
                <li>
                
                <a href="php.html" title="RTP (Real-time Transport Protocol) parsing PHP library">PHP</a></li>
                
                
                <li>
                
                <a href="python.html" title="RTP (Real-time Transport Protocol) parsing Python library">Python</a></li>
                
                
                <li>
                
                <a href="ruby.html" title="RTP (Real-time Transport Protocol) parsing Ruby library">Ruby</a></li>
                
            </ul>
            </div>
        </div>
    </div>
</section>

<section id="format-usage" class="format">
    <div class="container">
        <h2>Usage</h2>

        <p>Parse a local file and get structure in memory:</p>



<pre><code class="csharp">var data = RtpPacket.FromFile("path/to/local/file.rtp_packet");</code></pre>

<p>Or parse structure from a byte array:</p>

<pre><code class="csharp">byte[] someArray = new byte[] { ... };
var data = new RtpPacket(new KaitaiStream(someArray));</code></pre>

<p>After that, one can get various attributes from the structure by accessing properties like:</p>

<pre><code class="csharp">data.Data // => Payload without padding.data.LenPaddingIfExists // => If padding bit is enabled, last byte of data contains number of
bytes appended to the payload as padding.
</code></pre>

    </div>
</section>


<section id="format-lang" class="format">
    <div class="container">
        <h2>
            
            C# source code to parse RTP (Real-time Transport Protocol)
            
        </h2>

        

        <h3>RtpPacket.cs</h3>

        <div class="row">
            <div class="pull-right">
                <p>
                    <a href="src/csharp/RtpPacket.cs" class="btn btn-success">Download <i class="fa fa-download"></i></a>
                </p>
            </div>
        </div>

        <div class="row">
            <pre><code class="csharp">// This is a generated file! Please edit source .ksy file and use kaitai-struct-compiler to rebuild



namespace Kaitai
{

    /// &lt;summary&gt;
    /// The Real-time Transport Protocol (RTP) is a widely used network
    /// protocol for transmitting audio or video. It usually works with the
    /// RTP Control Protocol (RTCP). The transmission can be based on
    /// Transmission Control Protocol (TCP) or User Datagram Protocol (UDP).
    /// &lt;/summary&gt;
    public partial class RtpPacket : KaitaiStruct
    {
        public static RtpPacket FromFile(string fileName)
        {
            return new RtpPacket(new KaitaiStream(fileName));
        }


        public enum PayloadTypeEnum
        {
            Pcmu = 0,
            Reserved1 = 1,
            Reserved2 = 2,
            Gsm = 3,
            G723 = 4,
            Dvi41 = 5,
            Dvi42 = 6,
            Lpc = 7,
            Pama = 8,
            G722 = 9,
            L161 = 10,
            L162 = 11,
            Qcelp = 12,
            Cn = 13,
            Mpa = 14,
            G728 = 15,
            Dvi43 = 16,
            Dvi44 = 17,
            G729 = 18,
            Reserved3 = 19,
            Unassigned1 = 20,
            Unassigned2 = 21,
            Unassigned3 = 22,
            Unassigned4 = 23,
            Unassigned5 = 24,
            Celb = 25,
            Jpeg = 26,
            Unassigned6 = 27,
            Nv = 28,
            Unassigned7 = 29,
            Unassigned8 = 30,
            H261 = 31,
            Mpv = 32,
            Mp2t = 33,
            H263 = 34,
            MpegPs = 96,
        }
        public RtpPacket(KaitaiStream p__io, KaitaiStruct p__parent = null, RtpPacket p__root = null) : base(p__io)
        {
            m_parent = p__parent;
            m_root = p__root ?? this;
            f_lenPaddingIfExists = false;
            f_lenPadding = false;
            _read();
        }
        private void _read()
        {
            _version = m_io.ReadBitsInt(2);
            _hasPadding = m_io.ReadBitsInt(1) != 0;
            _hasExtension = m_io.ReadBitsInt(1) != 0;
            _csrcCount = m_io.ReadBitsInt(4);
            _marker = m_io.ReadBitsInt(1) != 0;
            _payloadType = ((PayloadTypeEnum) m_io.ReadBitsInt(7));
            m_io.AlignToByte();
            _sequenceNumber = m_io.ReadU2be();
            _timestamp = m_io.ReadU4be();
            _ssrc = m_io.ReadU4be();
            if (HasExtension) {
                _headerExtension = new HeaderExtention(m_io, this, m_root);
            }
            _data = m_io.ReadBytes(((M_Io.Size - M_Io.Pos) - LenPadding));
            _padding = m_io.ReadBytes(LenPadding);
        }
        public partial class HeaderExtention : KaitaiStruct
        {
            public static HeaderExtention FromFile(string fileName)
            {
                return new HeaderExtention(new KaitaiStream(fileName));
            }

            public HeaderExtention(KaitaiStream p__io, RtpPacket p__parent = null, RtpPacket p__root = null) : base(p__io)
            {
                m_parent = p__parent;
                m_root = p__root;
                _read();
            }
            private void _read()
            {
                _id = m_io.ReadU2be();
                _length = m_io.ReadU2be();
            }
            private ushort _id;
            private ushort _length;
            private RtpPacket m_root;
            private RtpPacket m_parent;
            public ushort Id { get { return _id; } }
            public ushort Length { get { return _length; } }
            public RtpPacket M_Root { get { return m_root; } }
            public RtpPacket M_Parent { get { return m_parent; } }
        }
        private bool f_lenPaddingIfExists;
        private byte? _lenPaddingIfExists;

        /// &lt;summary&gt;
        /// If padding bit is enabled, last byte of data contains number of
        /// bytes appended to the payload as padding.
        /// &lt;/summary&gt;
        public byte? LenPaddingIfExists
        {
            get
            {
                if (f_lenPaddingIfExists)
                    return _lenPaddingIfExists;
                if (HasPadding) {
                    long _pos = m_io.Pos;
                    m_io.Seek((M_Io.Size - 1));
                    _lenPaddingIfExists = m_io.ReadU1();
                    m_io.Seek(_pos);
                }
                f_lenPaddingIfExists = true;
                return _lenPaddingIfExists;
            }
        }
        private bool f_lenPadding;
        private byte _lenPadding;

        /// &lt;summary&gt;
        /// Always returns number of padding bytes to in the payload.
        /// &lt;/summary&gt;
        public byte LenPadding
        {
            get
            {
                if (f_lenPadding)
                    return _lenPadding;
                _lenPadding = (byte) ((HasPadding ? LenPaddingIfExists : 0));
                f_lenPadding = true;
                return _lenPadding;
            }
        }
        private ulong _version;
        private bool _hasPadding;
        private bool _hasExtension;
        private ulong _csrcCount;
        private bool _marker;
        private PayloadTypeEnum _payloadType;
        private ushort _sequenceNumber;
        private uint _timestamp;
        private uint _ssrc;
        private HeaderExtention _headerExtension;
        private byte[] _data;
        private byte[] _padding;
        private RtpPacket m_root;
        private KaitaiStruct m_parent;
        public ulong Version { get { return _version; } }
        public bool HasPadding { get { return _hasPadding; } }
        public bool HasExtension { get { return _hasExtension; } }
        public ulong CsrcCount { get { return _csrcCount; } }
        public bool Marker { get { return _marker; } }
        public PayloadTypeEnum PayloadType { get { return _payloadType; } }
        public ushort SequenceNumber { get { return _sequenceNumber; } }
        public uint Timestamp { get { return _timestamp; } }
        public uint Ssrc { get { return _ssrc; } }
        public HeaderExtention HeaderExtension { get { return _headerExtension; } }

        /// &lt;summary&gt;
        /// Payload without padding.
        /// &lt;/summary&gt;
        public byte[] Data { get { return _data; } }
        public byte[] Padding { get { return _padding; } }
        public RtpPacket M_Root { get { return m_root; } }
        public KaitaiStruct M_Parent { get { return m_parent; } }
    }
}
</code></pre>
            
        </div>
        
    </div>
</section>

    <footer id="main-footer">
        <div class="container">
            &copy; 2015-2019 Kaitai Project and <a href="https://github.com/kaitai-io/kaitai_struct_formats/graphs/contributors">formats repo contributors</a>

            <h3>Contacts</h3>

            <div class="row">
                <div class="col-sm-4">
                    <i class="fa fa-fw fa-2x fa-github"></i> <a href="https://github.com/kaitai-io/kaitai_struct">GitHub</a>
                </div>
                <div class="col-sm-4">
                    <i class="fa fa-fw fa-2x fa-twitter"></i> <a href="https://twitter.com/kaitai_io">@kaitai_io</a>
                </div>
                <div class="col-sm-4">
                    Gitter: <a href="https://gitter.im/kaitai_struct/Lobby">kaitai_struct</a>
                </div>
            </div>
        </div>
    </footer>

  <script src="//kaitai.io/js/jquery-1.12.3.min.js"></script>
  <script src="//kaitai.io/js/bootstrap.min.js"></script>

  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-76299550-1', 'auto');
      ga('send', 'pageview');
  </script>
</body>
</html>
