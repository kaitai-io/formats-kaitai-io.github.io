<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Java Virtual Machine bytecode: Python parsing library</title>
  <meta name="keywords" content="kaitai,struct,binary,format,parsing,decoding,java,javascript,python,ruby,library,metadata">
  <meta name="description" content="Kaitai Struct is a formal language for binary format specification that can be compiled into parser code">

  <link rel="stylesheet" href="//kaitai.io/styles/bootstrap.min.css">
  <link rel="stylesheet" href="//kaitai.io/styles/bootstrap-theme.min.css">
  <link href='https://fonts.googleapis.com/css?family=Exo:400,700' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Share+Tech+Mono' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  <link rel="stylesheet" href="//kaitai.io/styles/main.css" type="text/css">

  <link rel="stylesheet" href="//kaitai.io/styles/highlight/default.css">
  <style>
.diagram-img {
    display: block;
    max-width: 100%;
    height: auto;
    margin: 0 auto;
}

section.format {
    padding: 30px 0;
}

section#format-meta, section#format-index-header {
    background: #e3eef7;
}

section#format-diagram, section#format-index-footer {
    background: #e9f8dd;
}

section#format-ksy, section#format-lang {
    background: #d1eadd;
}

section#format-index .row {
    padding-bottom: 10px;
}

  </style>
  <script src="//kaitai.io/js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
</head>
<body data-spy="scroll" data-target="#main-navbar" data-offset="100">

    <nav class="navbar navbar-inverse navbar-fixed-top" id="main-navbar">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-navbar-collapse" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <span class="navbar-brand">Kaitai Struct</span>
            </div>
            <div class="collapse navbar-collapse" id="main-navbar-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="http://kaitai.io/#what-is-it">What is it?</a></li>
                    <li><a href="http://kaitai.io/#quick-start">Quick Start</a></li>
                    <li><a href="http://kaitai.io/#download">Download</a></li>
                    <li class="active"><a href="http://formats.kaitai.io/">Format Gallery</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="http://kaitai.io/repl/index.html">Try it</a></li>
                    <li><a href="https://ide.kaitai.io/">Web IDE</a></li>
                    <li><a href="http://doc.kaitai.io/">Documentation</a></li>
                </ul>
            </div>
        </div>
    </nav>
<nav>
    <div class="container">
    <ol class="breadcrumb">
        <li><a href="../index.html">Format Gallery</a></li>
        <li>Executables and Byte-code</li>
        <li class="active">Java Virtual Machine bytecode</li>
    </ol>
    </div>
</nav>

<section id="format-meta" class="format">
    <div class="container">
        <h1>Java Virtual Machine bytecode:
            
            Python parsing library
            
        </h1>

        <div class="row">
            <div class="col-md-8">
                <p></p>
            </div>
            <div class="col-md-4">
                <div class="panel panel-info">
                    
                    
                    
                    
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
            <p>
            This page hosts a formal specification of Java Virtual Machine bytecode
            using <a href="http://kaitai.io">Kaitai Struct</a>. This
            specification can be automatically translated into a
            variety of programming languages to get a parsing library.
            </p>

            <ul class="nav nav-pills">
                
                
                <li>
                
                <a href="index.html" title="Java Virtual Machine bytecode parsing Overview library">Overview</a></li>
                
                
                <li>
                
                <a href="csharp.html" title="Java Virtual Machine bytecode parsing C# library">C#</a></li>
                
                
                <li>
                
                <a href="graphviz.html" title="Java Virtual Machine bytecode parsing GraphViz library">GraphViz</a></li>
                
                
                <li>
                
                <a href="java.html" title="Java Virtual Machine bytecode parsing Java library">Java</a></li>
                
                
                <li>
                
                <a href="javascript.html" title="Java Virtual Machine bytecode parsing JavaScript library">JavaScript</a></li>
                
                
                <li>
                
                <a href="lua.html" title="Java Virtual Machine bytecode parsing Lua library">Lua</a></li>
                
                
                <li>
                
                <a href="perl.html" title="Java Virtual Machine bytecode parsing Perl library">Perl</a></li>
                
                
                <li>
                
                <a href="php.html" title="Java Virtual Machine bytecode parsing PHP library">PHP</a></li>
                
                
                <li class="active">
                
                <a href="python.html" title="Java Virtual Machine bytecode parsing Python library">Python</a></li>
                
                
                <li>
                
                <a href="ruby.html" title="Java Virtual Machine bytecode parsing Ruby library">Ruby</a></li>
                
            </ul>
            </div>
        </div>
    </div>
</section>

<section id="format-usage" class="format">
    <div class="container">
        <h2>Usage</h2>

        <p>Parse a local file and get structure in memory:</p>



<pre><code class="python">data = JavaBytecode.from_file("path/to/local/file.Java Virtual Machine bytecode")</code></pre>

<p>Or parse structure from a bytes:</p>

<pre><code class="python">from kaitaistruct import KaitaiStream, BytesIO

raw = b"\x00\x01\x02..."
data = JavaBytecode(KaitaiStream(BytesIO(raw)))</code></pre>

<p>After that, one can get various attributes from the structure by invoking getter methods like:</p>

<pre><code class="python">data.instructions # => get instructions</code></pre>

    </div>
</section>


<section id="format-lang" class="format">
    <div class="container">
        <h2>
            
            Python source code to parse Java Virtual Machine bytecode
            
        </h2>

        

        <h3>java_bytecode.py</h3>

        <div class="row">
            <div class="pull-right">
                <p>
                    <a href="src/python/java_bytecode.py" class="btn btn-success">Download <i class="fa fa-download"></i></a>
                </p>
            </div>
        </div>

        <div class="row">
            <pre><code class="python"># This is a generated file! Please edit source .ksy file and use kaitai-struct-compiler to rebuild

from pkg_resources import parse_version
from kaitaistruct import __version__ as ks_version, KaitaiStruct, KaitaiStream, BytesIO
from enum import Enum


if parse_version(ks_version) &lt; parse_version(&#39;0.7&#39;):
    raise Exception(&quot;Incompatible Kaitai Struct Python API: 0.7 or later is required, but you have %s&quot; % (ks_version))

class JavaBytecode(KaitaiStruct):
    &quot;&quot;&quot;
    .. seealso::
       Source - https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-6.html
    &quot;&quot;&quot;

    class Opcodes(Enum):
        nop = 0
        aconst_null = 1
        iconst_m1 = 2
        iconst_0 = 3
        iconst_1 = 4
        iconst_2 = 5
        iconst_3 = 6
        iconst_4 = 7
        iconst_5 = 8
        lconst_0 = 9
        lconst_1 = 10
        fconst_0 = 11
        fconst_1 = 12
        fconst_2 = 13
        dconst_0 = 14
        dconst_1 = 15
        bipush = 16
        sipush = 17
        ldc = 18
        ldc_w = 19
        ldc2_w = 20
        iload = 21
        lload = 22
        fload = 23
        dload = 24
        aload = 25
        iload_0 = 26
        iload_1 = 27
        iload_2 = 28
        iload_3 = 29
        lload_0 = 30
        lload_1 = 31
        lload_2 = 32
        lload_3 = 33
        fload_0 = 34
        fload_1 = 35
        fload_2 = 36
        fload_3 = 37
        dload_0 = 38
        dload_1 = 39
        dload_2 = 40
        dload_3 = 41
        aload_0 = 42
        aload_1 = 43
        aload_2 = 44
        aload_3 = 45
        iaload = 46
        laload = 47
        faload = 48
        daload = 49
        aaload = 50
        baload = 51
        caload = 52
        saload = 53
        istore = 54
        lstore = 55
        fstore = 56
        dstore = 57
        astore = 58
        istore_0 = 59
        istore_1 = 60
        istore_2 = 61
        istore_3 = 62
        lstore_0 = 63
        lstore_1 = 64
        lstore_2 = 65
        lstore_3 = 66
        fstore_0 = 67
        fstore_1 = 68
        fstore_2 = 69
        fstore_3 = 70
        dstore_0 = 71
        dstore_1 = 72
        dstore_2 = 73
        dstore_3 = 74
        astore_0 = 75
        astore_1 = 76
        astore_2 = 77
        astore_3 = 78
        iastore = 79
        lastore = 80
        fastore = 81
        dastore = 82
        aastore = 83
        bastore = 84
        castore = 85
        sastore = 86
        pop = 87
        pop2 = 88
        dup = 89
        dup_x1 = 90
        dup_x2 = 91
        dup2 = 92
        dup2_x1 = 93
        dup2_x2 = 94
        swap = 95
        iadd = 96
        ladd = 97
        fadd = 98
        dadd = 99
        isub = 100
        lsub = 101
        fsub = 102
        dsub = 103
        imul = 104
        lmul = 105
        fmul = 106
        dmul = 107
        idiv = 108
        ldiv = 109
        fdiv = 110
        ddiv = 111
        irem = 112
        lrem = 113
        frem = 114
        drem = 115
        ineg = 116
        lneg = 117
        fneg = 118
        dneg = 119
        ishl = 120
        lshl = 121
        ishr = 122
        lshr = 123
        iushr = 124
        lushr = 125
        iand = 126
        land = 127
        ior = 128
        lor = 129
        ixor = 130
        lxor = 131
        iinc = 132
        i2l = 133
        i2f = 134
        i2d = 135
        l2i = 136
        l2f = 137
        l2d = 138
        f2i = 139
        f2l = 140
        f2d = 141
        d2i = 142
        d2l = 143
        d2f = 144
        i2b = 145
        i2c = 146
        i2s = 147
        lcmp = 148
        fcmpl = 149
        fcmpg = 150
        dcmpl = 151
        dcmpg = 152
        ifeq = 153
        ifne = 154
        iflt = 155
        ifge = 156
        ifgt = 157
        ifle = 158
        if_icmpeq = 159
        if_icmpne = 160
        if_icmplt = 161
        if_icmpge = 162
        if_icmpgt = 163
        if_icmple = 164
        if_acmpeq = 165
        if_acmpne = 166
        goto = 167
        jsr = 168
        ret = 169
        tableswitch = 170
        lookupswitch = 171
        ireturn = 172
        lreturn = 173
        freturn = 174
        dreturn = 175
        areturn = 176
        return = 177
        getstatic = 178
        putstatic = 179
        getfield = 180
        putfield = 181
        invokevirtual = 182
        invokespecial = 183
        invokestatic = 184
        invokeinterface = 185
        invokedynamic = 186
        new = 187
        newarray = 188
        anewarray = 189
        arraylength = 190
        athrow = 191
        checkcast = 192
        instanceof = 193
        monitorenter = 194
        monitorexit = 195
        wide = 196
        multianewarray = 197
        ifnull = 198
        ifnonnull = 199
        goto_w = 200
        jsr_w = 201
        breakpoint = 202
        impdep1 = 254
        impdep2 = 255
    def __init__(self, _io, _parent=None, _root=None):
        self._io = _io
        self._parent = _parent
        self._root = _root if _root else self
        self._read()

    def _read(self):
        self.instructions = []
        i = 0
        while not self._io.is_eof():
            self.instructions.append(self._root.Inst(self._io, self, self._root))
            i += 1


    class Inst(KaitaiStruct):
        def __init__(self, _io, _parent=None, _root=None):
            self._io = _io
            self._parent = _parent
            self._root = _root if _root else self
            self._read()

        def _read(self):
            self.opcode = KaitaiStream.resolve_enum(self._root.Opcodes, self._io.read_u1())
            _on = self.opcode
            if _on == self._root.Opcodes.fload:
                self.arg = self._io.read_u1()
            elif _on == self._root.Opcodes.ldc:
                self.arg = self._io.read_u1()
            elif _on == self._root.Opcodes.lload:
                self.arg = self._io.read_u1()
            elif _on == self._root.Opcodes.new:
                self.arg = self._io.read_u2be()
            elif _on == self._root.Opcodes.jsr:
                self.arg = self._io.read_s2be()
            elif _on == self._root.Opcodes.getstatic:
                self.arg = self._io.read_u2be()
            elif _on == self._root.Opcodes.iload:
                self.arg = self._io.read_u1()
            elif _on == self._root.Opcodes.ldc2_w:
                self.arg = self._io.read_u2be()
            elif _on == self._root.Opcodes.dload:
                self.arg = self._io.read_u1()
            elif _on == self._root.Opcodes.goto:
                self.arg = self._io.read_s2be()
            elif _on == self._root.Opcodes.ldc_w:
                self.arg = self._io.read_u2be()
            elif _on == self._root.Opcodes.invokevirtual:
                self.arg = self._io.read_u2be()
            elif _on == self._root.Opcodes.sipush:
                self.arg = self._io.read_s2be()
            elif _on == self._root.Opcodes.newarray:
                self.arg = self._root.ArgNewarray(self._io, self, self._root)
            elif _on == self._root.Opcodes.invokestatic:
                self.arg = self._io.read_u2be()
            elif _on == self._root.Opcodes.invokeinterface:
                self.arg = self._root.ArgInvokeinterface(self._io, self, self._root)
            elif _on == self._root.Opcodes.bipush:
                self.arg = self._io.read_s1()
            elif _on == self._root.Opcodes.invokespecial:
                self.arg = self._io.read_u2be()
            elif _on == self._root.Opcodes.jsr_w:
                self.arg = self._io.read_s4be()
            elif _on == self._root.Opcodes.goto_w:
                self.arg = self._io.read_s4be()


    class ArgInvokeinterface(KaitaiStruct):
        def __init__(self, _io, _parent=None, _root=None):
            self._io = _io
            self._parent = _parent
            self._root = _root if _root else self
            self._read()

        def _read(self):
            self.method_index = self._io.read_u2be()
            self.count = self._io.read_u1()
            self.reserved = self._io.ensure_fixed_contents(b&quot;\x00&quot;)


    class ArgNewarray(KaitaiStruct):
        &quot;&quot;&quot;
        .. seealso::
           Source - https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-6.html#jvms-6.5.newarray
        &quot;&quot;&quot;

        class PrimTypes(Enum):
            t_boolean = 4
            t_char = 5
            t_float = 6
            t_double = 7
            t_byte = 8
            t_short = 9
            t_int = 10
            t_long = 11
        def __init__(self, _io, _parent=None, _root=None):
            self._io = _io
            self._parent = _parent
            self._root = _root if _root else self
            self._read()

        def _read(self):
            self.atype = KaitaiStream.resolve_enum(self._root.ArgNewarray.PrimTypes, self._io.read_u1())



</code></pre>
            
        </div>
        
    </div>
</section>

    <footer id="main-footer">
        <div class="container">
            &copy; 2015-2019 Kaitai Project and <a href="https://github.com/kaitai-io/kaitai_struct_formats/graphs/contributors">formats repo contributors</a>

            <h3>Contacts</h3>

            <div class="row">
                <div class="col-sm-4">
                    <i class="fa fa-fw fa-2x fa-github"></i> <a href="https://github.com/kaitai-io/kaitai_struct">GitHub</a>
                </div>
                <div class="col-sm-4">
                    <i class="fa fa-fw fa-2x fa-twitter"></i> <a href="https://twitter.com/kaitai_io">@kaitai_io</a>
                </div>
                <div class="col-sm-4">
                    Gitter: <a href="https://gitter.im/kaitai_struct/Lobby">kaitai_struct</a>
                </div>
            </div>
        </div>
    </footer>

  <script src="//kaitai.io/js/jquery-1.12.3.min.js"></script>
  <script src="//kaitai.io/js/bootstrap.min.js"></script>

  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-76299550-1', 'auto');
      ga('send', 'pageview');
  </script>
</body>
</html>
